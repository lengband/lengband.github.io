<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Network | Lengband Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="即刻记录精彩">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.a2da8f38.js" as="script"><link rel="preload" href="/assets/js/2.d9c77588.js" as="script"><link rel="preload" href="/assets/js/23.dc693082.js" as="script"><link rel="prefetch" href="/assets/js/10.7bb7c324.js"><link rel="prefetch" href="/assets/js/11.48aafdf6.js"><link rel="prefetch" href="/assets/js/12.fe4beccc.js"><link rel="prefetch" href="/assets/js/13.a9830dd2.js"><link rel="prefetch" href="/assets/js/14.cc471259.js"><link rel="prefetch" href="/assets/js/15.80a888f9.js"><link rel="prefetch" href="/assets/js/16.9ef8bd1d.js"><link rel="prefetch" href="/assets/js/17.96a14a35.js"><link rel="prefetch" href="/assets/js/18.5b895c69.js"><link rel="prefetch" href="/assets/js/19.8a9d930e.js"><link rel="prefetch" href="/assets/js/20.06738571.js"><link rel="prefetch" href="/assets/js/21.cbdb3403.js"><link rel="prefetch" href="/assets/js/22.c694d42d.js"><link rel="prefetch" href="/assets/js/24.0ccf1229.js"><link rel="prefetch" href="/assets/js/25.1a2e3e5b.js"><link rel="prefetch" href="/assets/js/26.2bef024a.js"><link rel="prefetch" href="/assets/js/27.9ed68f2a.js"><link rel="prefetch" href="/assets/js/28.7d6e7e23.js"><link rel="prefetch" href="/assets/js/29.7bd115e9.js"><link rel="prefetch" href="/assets/js/3.dba46206.js"><link rel="prefetch" href="/assets/js/4.56bd36f2.js"><link rel="prefetch" href="/assets/js/5.0e979832.js"><link rel="prefetch" href="/assets/js/6.fb87b94e.js"><link rel="prefetch" href="/assets/js/7.73f2f48f.js"><link rel="prefetch" href="/assets/js/8.45fbd5fb.js"><link rel="prefetch" href="/assets/js/9.c26675c1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/hero.jpeg" alt="Lengband Blog" class="logo"> <span class="site-name can-hide">Lengband Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Fe/" class="nav-link">
  Web
</a></div><div class="nav-item"><a href="/Ops/" class="nav-link">
  Ops
</a></div><div class="nav-item"><a href="/Network/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Network
</a></div><div class="nav-item"><a href="/Thought/" class="nav-link">
  随笔
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Contact" class="dropdown-title"><span class="title">Contact</span> <span class="arrow down"></span></button> <button type="button" aria-label="Contact" class="mobile-dropdown-title"><span class="title">Contact</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/lengband" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Fe/" class="nav-link">
  Web
</a></div><div class="nav-item"><a href="/Ops/" class="nav-link">
  Ops
</a></div><div class="nav-item"><a href="/Network/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Network
</a></div><div class="nav-item"><a href="/Thought/" class="nav-link">
  随笔
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Contact" class="dropdown-title"><span class="title">Contact</span> <span class="arrow down"></span></button> <button type="button" aria-label="Contact" class="mobile-dropdown-title"><span class="title">Contact</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/lengband" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Network/Http/" class="sidebar-link">透析HTTP协议</a></li><li><a href="/Network/Dns/" class="sidebar-link">Dns</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="网络分层"><a href="#网络分层" class="header-anchor">#</a> 网络分层</h1> <h2 id="tcp-ip-网络分层模型"><a href="#tcp-ip-网络分层模型" class="header-anchor">#</a> TCP/IP 网络分层模型</h2> <p>TCP/IP 协议总共有四层，注意它的层次顺序是“从下往上”数的，所以第一层就是最下面的一层。
<img src="https://static001.geekbang.org/resource/image/2b/03/2b8fee82b58cc8da88c74a33f2146703.png" alt=""></p> <ol><li>第一层叫“链接层”（link layer），负责在以太网、WiFi 这样的底层网络上发送原始数据包，工作在网卡这个层次，使用 MAC 地址来标记网络上的设备，所以有时候也叫 MAC 层。</li> <li>第二层叫“网际层”或者“网络互连层”（internet layer），IP 协议就处在这一层。因为 IP 协议定义了“IP 地址”的概念，所以就可以在“链接层”的基础上，用 IP 地址取代 MAC 地址，把许许多多的局域网、广域网连接成一个虚拟的巨大网络，在这个网络里找设备时只要把 IP 地址再“翻译”成 MAC 地址就可以了。</li> <li>第三层叫“传输层”（transport layer），这个层次协议的职责是保证数据在 IP 地址标记的两点之间“可靠”地传输，是 TCP 协议工作的层次，另外还有它的一个“小伙伴”UDP。</li></ol> <blockquote><p>TCP 是一个有状态的协议，需要先与对方建立连接然后才能发送数据，而且保证数据不丢失不重复。而 UDP 则比较简单，它无状态，不用事先建立连接就可以任意发送数据，但不保证数据一定会发到对方。两个协议的另一个重要区别在于数据的形式。TCP 的数据是连续的“字节流”，有先后顺序，而 UDP 则是分散的小数据包，是顺序发，乱序收。</p></blockquote> <ol start="4"><li>协议栈的第四层叫“应用层”（application layer），由于下面的三层把基础打得非常好，所以在这一层就“百花齐放”了，有各种面向具体应用的协议。例如 Telnet、SSH、FTP、SMTP 等等，当然还有我们的 HTTP。</li></ol> <blockquote><p>MAC 层的传输单位是帧（frame），IP 层的传输单位是包（packet），TCP 层的传输单位是段（segment），HTTP 的传输单位则是消息或报文（message）。但这些名词并没有什么本质的区分，可以统称为数据包。</p></blockquote> <h2 id="osi-网络分层模型"><a href="#osi-网络分层模型" class="header-anchor">#</a> OSI 网络分层模型</h2> <p>OSI，全称是“开放式系统互联通信参考模型”（Open System Interconnection Reference Model）。共七层
<img src="https://static001.geekbang.org/resource/image/3a/dc/3abcf1462621ff86758a8d9571c07cdc.png" alt=""></p> <ol><li>第一层：物理层，网络的物理形式，例如电缆、光纤、网卡、集线器等等；</li> <li>第二层：数据链路层，它基本相当于 TCP/IP 的链接层；</li> <li>第三层：网络层，相当于 TCP/IP 里的网际层；</li> <li>第四层：传输层，相当于 TCP/IP 里的传输层；</li> <li>第五层：会话层，维护网络中的连接状态，即保持会话和同步；</li> <li>第六层：表示层，把数据转换为合适、可理解的语法和语义；</li> <li>第七层：应用层，面向具体的应用传输数据。</li></ol> <h2 id="两个分层模型的映射关系"><a href="#两个分层模型的映射关系" class="header-anchor">#</a> 两个分层模型的映射关系</h2> <p><img src="https://static001.geekbang.org/resource/image/9d/94/9d9b3c9274465c94e223676b6d434194.png" alt=""></p> <ol><li>第一层：物理层，TCP/IP 里无对应；</li> <li>第二层：数据链路层，对应 TCP/IP 的链接层；</li> <li>第三层：网络层，对应 TCP/IP 的网际层；</li> <li>第四层：传输层，对应 TCP/IP 的传输层；</li> <li>第五、六、七层：统一对应到 TCP/IP 的应用层。</li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/12/2021, 3:24:37 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a2da8f38.js" defer></script><script src="/assets/js/2.d9c77588.js" defer></script><script src="/assets/js/23.dc693082.js" defer></script>
  </body>
</html>
