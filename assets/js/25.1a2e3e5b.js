(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{395:function(s,a,e){"use strict";e.r(a);var n=e(45),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"集群环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#集群环境"}},[s._v("#")]),s._v(" 集群环境")]),s._v(" "),e("blockquote",[e("p",[s._v("快速搭建集群环境(仅可用4小时)")])]),s._v(" "),e("ol",[e("li",[e("p",[s._v("https://labs.play-with-k8s.com/")])]),s._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://github.com/kubernetes/minikube",target:"_blank",rel:"noopener noreferrer"}},[s._v("Minikube"),e("OutboundLink")],1)])]),s._v(" "),e("li",[e("p",[s._v("docker desktop 内置 (推荐)")])])]),s._v(" "),e("h4",{attrs:{id:"单纯使用容器-存在的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#单纯使用容器-存在的问题"}},[s._v("#")]),s._v(" 单纯使用容器，存在的问题")]),s._v(" "),e("ul",[e("li",[s._v("怎么去管理这么多容器")]),s._v(" "),e("li",[s._v("怎么能方便的横向扩展")]),s._v(" "),e("li",[s._v("如果容器down了，怎么能自动恢复")]),s._v(" "),e("li",[s._v("如果更新容器而不影响业务")]),s._v(" "),e("li",[s._v("如何去监控追踪这些容器")]),s._v(" "),e("li",[s._v("怎么去调度容器的创建")]),s._v(" "),e("li",[s._v("保护隐私数据？")])]),s._v(" "),e("h3",{attrs:{id:"kubelet"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kubelet"}},[s._v("#")]),s._v(" kubelet")]),s._v(" "),e("p",[s._v("相当于一个在node上的代理，管理容器相关。可以在node上面创建pod，创建pod里面的网络、volumns")]),s._v(" "),e("h3",{attrs:{id:"kube-proxy"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kube-proxy"}},[s._v("#")]),s._v(" kube-proxy")]),s._v(" "),e("p",[s._v("主要负责容器上的网络代理，负载均衡的实现")]),s._v(" "),e("h3",{attrs:{id:"kubectl"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kubectl"}},[s._v("#")]),s._v(" kubectl")]),s._v(" "),e("p",[s._v("客户端（命令行）与k8s交互的一个中介")]),s._v(" "),e("p",[e("code",[s._v("kubectl completion -h")]),s._v("\n打开自动补全，以mac的zsh举例："),e("code",[s._v("source <(kubectl completion zsh)")])]),s._v(" "),e("p",[s._v("在本地访问远端的k8s集群:")]),s._v(" "),e("ol",[e("li",[s._v("把远端的K8S集群的配置放到本地，一般在 "),e("code",[s._v("~/.kube/config")]),s._v("，将里面的"),e("code",[s._v("cluster")]),s._v("、"),e("code",[s._v("context")]),s._v("和"),e("code",[s._v("user")]),s._v("的key-value复制过来，放在本地的"),e("code",[s._v("~/.kube/config")]),s._v("进行和原来的配置合并（注意"),e("code",[s._v("server-certificate-data和client-certificate-data")]),s._v("都是一行）")]),s._v(" "),e("li",[s._v("执行"),e("code",[s._v("kubectl get contexts")]),s._v("应该能看到新加的context")]),s._v(" "),e("li",[s._v("执行"),e("code",[s._v("kubectl config use-context <context-name>")]),s._v("切换到预期的context进行集群管理")])]),s._v(" "),e("p",[e("code",[s._v("kubectl get node")]),s._v(" 查看node list\n"),e("code",[s._v("kubectl get node -o wide")]),s._v(" 查看node list 的详细信息（常用）\n"),e("code",[s._v("kubectl get node -o yaml")]),s._v(" 查看node list 的yaml 详细信息\n"),e("code",[s._v("kubectl get node -o json")]),s._v(" 查看node list 的json 详细信息\n"),e("code",[s._v("kubectl get node --show-labels")]),s._v(" 查看node list 的 label\n"),e("code",[s._v("kubectl describe node <node-name>")]),s._v(" 查看node的详情")]),s._v(" "),e("p",[s._v("设置label\n"),e("code",[s._v("kubectl label node <node-name> env=test")]),s._v(" 给node设置label"),e("code",[s._v("env=test")]),s._v(" "),e("code",[s._v("kubectl label node <node-name> env-")]),s._v(" 给node删除label"),e("code",[s._v("env")])]),s._v(" "),e("p",[s._v("设置roles\n"),e("code",[s._v("kubectl label node <node-name> node-role.kubernetes.io/master=")]),s._v(" 设置master\n"),e("code",[s._v("kubectl label node <node-name> node-role.kubernetes.io/worker=")]),s._v(" 设置worker")]),s._v(" "),e("h2",{attrs:{id:"pod"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pod"}},[s._v("#")]),s._v(" Pod")]),s._v(" "),e("ul",[e("li",[s._v("一个或者一组应用容器，他们分享资源（比如volume）")]),s._v(" "),e("li",[s._v("分享相同命名空间（如网络空间）的容器")]),s._v(" "),e("li",[s._v("Pod是k8s最小的调度单位")])]),s._v(" "),e("h3",{attrs:{id:"create-pod"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-pod"}},[s._v("#")]),s._v(" create pod")]),s._v(" "),e("p",[s._v("create pod through yml file")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl create -f nginx_busybox.yml\npod "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-busybox"')]),s._v(" created\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"get-pod-list"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get-pod-list"}},[s._v("#")]),s._v(" get pod list")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl get pods\nNAME            READY     STATUS    RESTARTS   AGE\nnginx-busybox   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2       Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          57s\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"get-pod-detail"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get-pod-detail"}},[s._v("#")]),s._v(" get pod detail")]),s._v(" "),e("p",[s._v("we use use describe or get pod with "),e("code",[s._v("-o")]),s._v(" option to display more information about this pod")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl describe pod nginx-busybox\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl get pods nginx-busybox -o wide\nNAME            READY     STATUS    RESTARTS   AGE       IP           NODE\nnginx-busybox   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2       Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3m        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.4   minikube\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("here "),e("code",[s._v("-o")]),s._v(" we can use "),e("code",[s._v("wide")]),s._v(", "),e("code",[s._v("json")]),s._v(", "),e("code",[s._v("yaml")]),s._v(", etc.")]),s._v(" "),e("h3",{attrs:{id:"get-into-pod-container"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get-into-pod-container"}},[s._v("#")]),s._v(" get into pod(container)")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" nginx-busybox -it "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v("\nDefaulting container name to nginx.\nUse "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'kubectl describe pod/nginx-busybox -n default'")]),s._v(" to see all of the containers "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" this pod.\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"delete-pod"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#delete-pod"}},[s._v("#")]),s._v(" delete pod")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl delete -f nginx_busybox.yml\npod "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-busybox"')]),s._v(" deleted\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"namespace"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#namespace"}},[s._v("#")]),s._v(" Namespace")]),s._v(" "),e("ul",[e("li",[s._v("Namespace命名空间用于不同的team，不同的project之间的隔离")]),s._v(" "),e("li",[s._v("在不同的命名空间中，各种资源的名字是相互独立，比如可以具有相同名称的pod存在")])]),s._v(" "),e("h3",{attrs:{id:"get-all-namesapce"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get-all-namesapce"}},[s._v("#")]),s._v(" get all namesapce")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl get namespace\nNAME          STATUS    AGE\ndefault       Active    1d\nkube-public   Active    1d\nkube-system   Active    1d\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h3",{attrs:{id:"create-namespace"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-namespace"}},[s._v("#")]),s._v(" create namespace")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("% kubectl create namespace demo\nnamespace "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"demo"')]),s._v(" created\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"delete-namespace"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#delete-namespace"}},[s._v("#")]),s._v(" delete namespace")]),s._v(" "),e("p",[s._v("Please makesure there are no resources within this namespace you want to delete.")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl delete namespace demo\nnamespace "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"demo"')]),s._v(" deleted\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"create-pod-with-namespace"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-pod-with-namespace"}},[s._v("#")]),s._v(" create pod with namespace")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" nginx_namespace.yml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: nginx\n  namespace: demo\nspec:\n  containers:\n  - name: nginx\n    image: nginx\n    ports:\n    - containerPort: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl create -f nginx_namespace.yml\nError from server "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("NotFound"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": error when creating "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx_namespace.yml"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" namespaces "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"demo"')]),s._v(" not found\n$ kubectl create namespace demo\nnamespace "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"demo"')]),s._v(" created\n$ kubectl create -f nginx_namespace.yml\npod "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx"')]),s._v(" created\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"get-pod-with-namespace"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get-pod-with-namespace"}},[s._v("#")]),s._v(" get pod with namespace")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl get pod --namespace demo\nNAME      READY     STATUS    RESTARTS   AGE\nnginx     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          6m\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"get-pod-with-all-namespace"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get-pod-with-all-namespace"}},[s._v("#")]),s._v(" get pod with all namespace")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl get pod --all-namespaces\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"create-our-own-context"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-our-own-context"}},[s._v("#")]),s._v(" create our own context")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl config set-context demo --user"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("minikube --cluster"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("minikube --namespace"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("demo\nContext "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"demo"')]),s._v(" created.\n$ kubectl config get-contexts\nCURRENT   NAME       CLUSTER    AUTHINFO   NAMESPACE\n          demo       minikub    minikube   demo\n          minikube   minikube   minikube\n$ kubectl config use-context demo\nSwitched to context "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"demo"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h2",{attrs:{id:"deployment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deployment"}},[s._v("#")]),s._v(" Deployment")]),s._v(" "),e("h3",{attrs:{id:"create-a-deployment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-a-deployment"}},[s._v("#")]),s._v(" Create a Deployment")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl create -f nginx_depolyment.yml\ndeployment.apps "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-deployment"')]),s._v(" created\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"get-deployment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#get-deployment"}},[s._v("#")]),s._v(" Get deployment")]),s._v(" "),e("p",[s._v("Get deployment and pod information")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl get deployment\nNAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE\nnginx-deployment   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("            "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("           12s\n$ kubectl get deployment -o wide\nNAME               DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE       CONTAINERS   IMAGES        SELECTOR\nnginx-deployment   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("            "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("           40s       nginx        nginx:1.7.9   "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\n$ kubectl get pod -l "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\nNAME                                READY     STATUS    RESTARTS   AGE\nnginx-deployment-75675f5897-bwz4j   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\nnginx-deployment-75675f5897-z626w   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          1m\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("also can use describe")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl describe deployment nginx-deployment\nName:                   nginx-deployment\nNamespace:              default\nCreationTimestamp:      Tue, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Jun "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":15:17 +0800\nLabels:                 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nAnnotations:            deployment.kubernetes.io/revision"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nSelector:               "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\nReplicas:               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" desired "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" updated "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" total "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" available "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" unavailable\nStrategyType:           RollingUpdate\nMinReadySeconds:        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nRollingUpdateStrategy:  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("% max unavailable, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("% max surge\nPod Template:\n  Labels:  "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\n  Containers:\n   nginx:\n    Image:        nginx:1.7.9\n    Port:         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\n    Host Port:    "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/TCP\n    Environment:  "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    Mounts:       "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  Volumes:        "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nConditions:\n  Type           Status  Reason\n  ----           ------  ------\n  Available      True    MinimumReplicasAvailable\n  Progressing    True    NewReplicaSetAvailable\nOldReplicaSets:  "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nNewReplicaSet:   nginx-deployment-75675f5897 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("/2 replicas created"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nEvents:\n  Type    Reason             Age   From                   Message\n  ----    ------             ----  ----                   -------\n  Normal  ScalingReplicaSet  3m    deployment-controller  Scaled up replica "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" nginx-deployment-75675f5897 to "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br")])]),e("h3",{attrs:{id:"keep-desired-pod-state"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#keep-desired-pod-state"}},[s._v("#")]),s._v(" keep desired pod state")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl get pod -l "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\nNAME                                READY     STATUS    RESTARTS   AGE\nnginx-deployment-75675f5897-bwz4j   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3m\nnginx-deployment-75675f5897-z626w   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          3m\n$ kubectl delete pod nginx-deployment-75675f5897-bwz4j\npod "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-deployment-75675f5897-bwz4j"')]),s._v(" deleted\n$ kubectl get pod -l "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\nNAME                                READY     STATUS    RESTARTS   AGE\nnginx-deployment-75675f5897-6fdvh   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("invalid"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nnginx-deployment-75675f5897-z626w   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          4m\n$ kubectl get pod -l "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\nNAME                                READY     STATUS    RESTARTS   AGE\nnginx-deployment-75675f5897-6fdvh   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          0s\nnginx-deployment-75675f5897-z626w   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          4m\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h3",{attrs:{id:"updating-the-deployment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#updating-the-deployment"}},[s._v("#")]),s._v(" Updating the deployment")]),s._v(" "),e("div",{staticClass:"language-yaml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yaml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1 "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# for versions before 1.9.0 use apps/v1beta2")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deployment\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("deployment\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("replicas")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.8")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Update the version of nginx from 1.7.9 to 1.8")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl apply -f nginx_depolyment_update.yml\ndepolyment "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-deployment"')]),s._v(" updated\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"更新deployment-scaling-the-application-by-increasing-the-replica-count"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新deployment-scaling-the-application-by-increasing-the-replica-count"}},[s._v("#")]),s._v(" 更新Deployment，Scaling the application by increasing the replica count")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl apply -f nginx_depolyment_scale.yml\ndepolyment "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-deployment"')]),s._v(" updated\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl get pods -l "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\nNAME                               READY     STATUS    RESTARTS   AGE\nnginx-deployment-148880595-4zdqq   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          25s\nnginx-deployment-148880595-6zgi1   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          25s\nnginx-deployment-148880595-fxcez   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          2m\nnginx-deployment-148880595-rwovn   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1       Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          2m\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"只更新replication"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#只更新replication"}},[s._v("#")]),s._v(" 只更新replication")]),s._v(" "),e("p",[e("em",[s._v("执行后会有提示，安装提示更新相应的deployment")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl scale\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"只更新image或者env"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#只更新image或者env"}},[s._v("#")]),s._v(" 只更新image或者env...")]),s._v(" "),e("p",[e("em",[s._v("执行后会有提示，如更新镜像："),e("code",[s._v("kubectl set image deployment/nginx-deployment nginx=nginx:1.9.1")])])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"delete-a-deployment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#delete-a-deployment"}},[s._v("#")]),s._v(" Delete a Deployment")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl delete deployment nginx-deployment\ndepolyment "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-deployment"')]),s._v(" deleted\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"replicaset"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#replicaset"}},[s._v("#")]),s._v(" Replicaset")]),s._v(" "),e("h3",{attrs:{id:"create-deployment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-deployment"}},[s._v("#")]),s._v(" create deployment")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl apply -f nginx_deployment.yml\ndeployment.apps "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-deployment-test"')]),s._v(" created\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("describe and get the relicaset event")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl describe deployment nginx-deployment-test\nName:                   nginx-deployment-test\nNamespace:              default\nCreationTimestamp:      Wed, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" Jun "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" 00:51:10 +0800\nLabels:                 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nAnnotations:            deployment.kubernetes.io/revision"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                        kubectl.kubernetes.io/last-applied-configuration"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"apiVersion"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"apps/v1"')]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kind"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Deployment"')]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"metadata"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"annotations"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-deployment-test"')]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"namespace"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"spec"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"replicas"')]),s._v(':4,"se'),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nSelector:               "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\nReplicas:               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" desired "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" updated "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" total "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" available "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" unavailable\nStrategyType:           RollingUpdate\nMinReadySeconds:        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nRollingUpdateStrategy:  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("% max unavailable, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("% max surge\nPod Template:\n  Labels:  "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\n  Containers:\n   nginx:\n    Image:        nginx:1.7.9\n    Port:         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\n    Host Port:    "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/TCP\n    Environment:  "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    Mounts:       "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  Volumes:        "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nConditions:\n  Type           Status  Reason\n  ----           ------  ------\n  Available      True    MinimumReplicasAvailable\n  Progressing    True    NewReplicaSetAvailable\nOldReplicaSets:  "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nNewReplicaSet:   nginx-deployment-test-75675f5897 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("/4 replicas created"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nEvents:\n  Type    Reason             Age   From                   Message\n  ----    ------             ----  ----                   -------\n  Normal  ScalingReplicaSet  8h    deployment-controller  Scaled up replica "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" nginx-deployment-test-75675f5897 to "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br")])]),e("h3",{attrs:{id:"scale-and-check-the-replicaset-event"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scale-and-check-the-replicaset-event"}},[s._v("#")]),s._v(" scale and check the replicaset event")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl scale --current-replicas"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" --replicas"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" deployment/nginx-deployment-test\ndeployment.extensions "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-deployment-test"')]),s._v(" scaled\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl describe deployment nginx-deployment-test\nName:                   nginx-deployment-test\nNamespace:              default\nCreationTimestamp:      Wed, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),s._v(" Jun "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" 00:51:10 +0800\nLabels:                 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nAnnotations:            deployment.kubernetes.io/revision"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n                        kubectl.kubernetes.io/last-applied-configuration"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"apiVersion"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"apps/v1"')]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kind"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Deployment"')]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"metadata"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"annotations"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-deployment-test"')]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"namespace"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"spec"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"replicas"')]),s._v(':4,"se'),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nSelector:               "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\nReplicas:               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" desired "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" updated "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" total "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" available "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" unavailable\nStrategyType:           RollingUpdate\nMinReadySeconds:        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nRollingUpdateStrategy:  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("% max unavailable, "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("% max surge\nPod Template:\n  Labels:  "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\n  Containers:\n   nginx:\n    Image:        nginx:1.7.9\n    Port:         "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\n    Host Port:    "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/TCP\n    Environment:  "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    Mounts:       "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  Volumes:        "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nConditions:\n  Type           Status  Reason\n  ----           ------  ------\n  Progressing    True    NewReplicaSetAvailable\n  Available      True    MinimumReplicasAvailable\nOldReplicaSets:  "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nNewReplicaSet:   nginx-deployment-test-75675f5897 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("/6 replicas created"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nEvents:\n  Type    Reason             Age   From                   Message\n  ----    ------             ----  ----                   -------\n  Normal  ScalingReplicaSet  8h    deployment-controller  Scaled up replica "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" nginx-deployment-test-75675f5897 to "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n  Normal  ScalingReplicaSet  8h    deployment-controller  Scaled up replica "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" nginx-deployment-test-75675f5897 to "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br")])]),e("h3",{attrs:{id:"check-rollout-status"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#check-rollout-status"}},[s._v("#")]),s._v(" check rollout status")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("kubectl rollout status deployment nginx-deployment-test\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("rollout history")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl rollout "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" deployment nginx-deployment-test\ndeployments "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-deployment-test"')]),s._v("\nREVISION  CHANGE-CAUSE\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("         "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("         "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n$ kubectl rollout "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" deployment nginx-deployment-test --revision "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\ndeployments "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-deployment-test"')]),s._v(" with revision "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2")]),s._v("\nPod Template:\n  Labels:\t"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\n\tpod-template-hash"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("703038527")]),s._v("\n  Containers:\n   nginx:\n    Image:\tnginx:1.9.1\n    Port:\t"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("/TCP\n    Host Port:\t"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/TCP\n    Environment:\t"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    Mounts:\t"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  Volumes:\t"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("h3",{attrs:{id:"rollout-undo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rollout-undo"}},[s._v("#")]),s._v(" rollout undo")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl rollout undo deployment nginx-deployment-test\ndeployment.apps "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx-deployment-test"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);