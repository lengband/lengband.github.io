(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{385:function(t,s,n){"use strict";n.r(s);var a=n(45),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"基础"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基础"}},[t._v("#")]),t._v(" 基础")]),t._v(" "),n("h4",{attrs:{id:"rpc调用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rpc调用"}},[t._v("#")]),t._v(" RPC调用")]),t._v(" "),n("blockquote",[n("p",[t._v("Remote Procedure Call（远程过程调用）")])]),t._v(" "),n("p",[n("strong",[t._v("和Ajax有什么相同点？")])]),t._v(" "),n("ul",[n("li",[t._v("都是两个计算机之间的网络通信")]),t._v(" "),n("li",[t._v("需要双方预定一个数据格式")])]),t._v(" "),n("p",[n("strong",[t._v("和Ajax有什么不同点")])]),t._v(" "),n("ul",[n("li",[t._v("Ajax使用DNS寻址服务，RPC不一定使用")])]),t._v(" "),n("blockquote",[n("p",[t._v("可能会在内网之间使用，如果用DNS就太“绕远”了。DNS寻址本身是用域名(http://xxx.com)去DNS换取IP后进行查询通信，RPC一般是用特有的服务通信(腾讯和阿里)，比如它是通过ID或者其他的标识取代(http://xxx.com)域名这种形式，到寻址服务器得到IP")])]),t._v(" "),n("ul",[n("li",[t._v("应用层协议一般不适用HTTP，而是使用二进制协议")])]),t._v(" "),n("blockquote",[n("p",[t._v("RPC一般都是两个后端服务器通信，而二进制优势就是：更小的数据包体积，更快的解编码效率")])]),t._v(" "),n("ul",[n("li",[t._v("基于TCP或者UDP协议\nTCP通信方式\n"),n("ul",[n("li",[t._v("单工通讯")]),t._v(" "),n("li",[t._v("半双工通信")]),t._v(" "),n("li",[t._v("全双工通信")])])])]),t._v(" "),n("h2",{attrs:{id:"问题记录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#问题记录"}},[t._v("#")]),t._v(" 问题记录")]),t._v(" "),n("h4",{attrs:{id:"node-js里面-buffer-readuint16be-是什么意思-下面的数字是如何得来的"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-js里面-buffer-readuint16be-是什么意思-下面的数字是如何得来的"}},[t._v("#")]),t._v(" node.js里面 buffer.readUInt16BE 是什么意思，下面的数字是如何得来的？")]),t._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" buffer2"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Buffer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alloc")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbuffer2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbuffer2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbuffer2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x23")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbuffer2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0x42")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readUInt16BE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 772")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readUInt16LE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1027")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readUInt16BE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1059")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readUInt16LE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 8964")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readUInt16BE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 9026")]),t._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("buffer2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("readUInt16LE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 16931")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("p",[t._v("答：")]),t._v(" "),n("blockquote",[n("p",[t._v("注意 1byte(字节)=8bit(位/比特)")])]),t._v(" "),n("p",[t._v("var buffer2=Buffer.alloc(4); //创建了4个byte的buffer\nbuffer2[0]=0x3; // 给第一个byte存入 16进制的3， 以下类似\nbuffer2[1]=0x4;\nbuffer2[2]=0x23;\nbuffer2[3]=0x42; // 此时存入之后， 在buffer里面就是 0x3, 0x4, 0x23, 0x42, 在内存里面以连续的4个byte存储， 在电脑里面就是一连串0和1 构成的数字 如0x3 就是 0000 0011, 而0x4 则是 0000 0100, 0x23 = 00100011, 0x42 = 01000010, 在内存里面连续方式存取就是00000011, 00000100, 00100011, 01000010\nconsole.log(buffer2.readUInt16BE(0));  // 这个意思就是从左边开始第一个byte起读16位，然后转换为10进制正整数(unit), 也就是00000011,00000100（16进制就是0x0304）,\n使用parseInt(‘0000001100000100’, 2) 就可以得到 772,  从第二个byte开始读就是00000100, 00100011， parseInt(‘0000010000100011’, 2) === 1059")]),t._v(" "),n("p",[t._v("console.log(buffer2.readUInt16LE(0)); //这个就是从右边开始读16位然后转换为10进制正整数(unit)， 也就是00000011,00000100, 00100011, 01000010中从0位开始先取16个数字， 00000011,00000100, 然后右边的一个byte当做数字的高位， 也就是parseInt(‘0000010000000011’, 2) === 1027")]),t._v(" "),n("p",[t._v("readUInt16BE(1) 其中的参数 1 表示offset(偏移量)，也就是说偏移1位，那么取的值就是 00000100, 00100011, 0000010000100011转换为二进制就是 1059, 其它同理")]),t._v(" "),n("p",[t._v("le 和be是指 little endian, big endian, 中文应该是大端小端， 搞出这种区别是因为cpu的设计者各自设计自己的，然后互相不屌对方， 没有统一起来，intel是小的， 摩托罗拉和IBM是大的，各自有自己的考虑和实现，放在nodejs这里大小端是为了方便和不同编码的数据交换。")]),t._v(" "),n("h4",{attrs:{id:"node-js里面当用-buffer-格式化一个json-比较麻烦-需要一个字段一个字段write-有没有类似js里面的json-stringify-json-的方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#node-js里面当用-buffer-格式化一个json-比较麻烦-需要一个字段一个字段write-有没有类似js里面的json-stringify-json-的方法"}},[t._v("#")]),t._v(" node.js里面当用 buffer 格式化一个json，比较麻烦，需要一个字段一个字段write，有没有类似js里面的JSON.stringify(json)的方法？")]),t._v(" "),n("p",[t._v("答：\n社区内有库实现了，https://github.com/mafintosh/protocol-buffers\n当使用 encode 的时候就能方便的从一个 json 变为 buffer")]),t._v(" "),n("h4",{attrs:{id:"centos7上面通过yum安装的node版本过低-怎么升级"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#centos7上面通过yum安装的node版本过低-怎么升级"}},[t._v("#")]),t._v(" centos7上面通过yum安装的node版本过低，怎么升级？")]),t._v(" "),n("p",[n("strong",[t._v("查看nodejs版本")])]),t._v(" "),n("p",[n("code",[t._v("$ node -v")])]),t._v(" "),n("p",[n("strong",[t._v("清除nodejs缓存")])]),t._v(" "),n("p",[n("code",[t._v("$ npm cache clean -f")])]),t._v(" "),n("p",[n("strong",[t._v("升级node")])]),t._v(" "),n("p",[t._v("1. 安装nodejs管理工具 n")]),t._v(" "),n("p",[n("code",[t._v("$ npm install -g n")])]),t._v(" "),n("p",[t._v("2. 切换已安装版本")]),t._v(" "),n("p",[n("code",[t._v("$ n")])]),t._v(" "),n("p",[t._v("3. 安装稳定官方版本")]),t._v(" "),n("p",[n("code",[t._v("$ n stable")])]),t._v(" "),n("p",[t._v("4. 安装指定版本")]),t._v(" "),n("p",[n("code",[t._v("$ n 8.11.3")])]),t._v(" "),n("p",[t._v("5. 安装最新的LTS官方版本")]),t._v(" "),n("p",[n("code",[t._v("$ n lts")])])])}),[],!1,null,null,null);s.default=e.exports}}]);