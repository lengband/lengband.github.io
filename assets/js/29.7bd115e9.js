(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{399:function(s,e,a){"use strict";a.r(e);var n=a(45),t=Object(n.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"第1章-mysql数据库的介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第1章-mysql数据库的介绍"}},[s._v("#")]),s._v(" 第1章：mysql数据库的介绍")]),s._v(" "),a("blockquote",[a("p",[s._v("由于博客排版问题，强烈建议观看 github 版")])]),s._v(" "),a("p",[s._v("​"),a("a",{attrs:{href:"https://github.com/lengband/mysql_doc/blob/main/README.md",target:"_blank",rel:"noopener noreferrer"}},[s._v("github地址"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"_1-1-mysql的简介介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-mysql的简介介绍"}},[s._v("#")]),s._v(" 1.1 mysql的简介介绍")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：mysql的简介")])]),s._v(" "),a("ul",[a("li",[s._v("1、什么是mysql？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql是一个开源的关系型数据库管理系统，现在是oracle公司旗下的一款产品，由C和C++语言编写，可移植性高。支持在多种操作系统上安装，最常见有AIX，linux，window。mysql因为开源免费，所以受到了目前互联网行业的欢迎。\n\n以mysql作为数据库，linux系统作为操作系统，apache或者nginx作为web服务器，perl/php/python作为服务端的脚本解释器，就可以搭建起一个免费的网站。被业界称为LNMP或者LAMP\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"第2章-mysql数据库面试必备入门基础知识"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第2章-mysql数据库面试必备入门基础知识"}},[s._v("#")]),s._v(" 第2章：mysql数据库面试必备入门基础知识")]),s._v(" "),a("p",[a("strong",[s._v("简介：主讲面试时，面试官必问的知识点，主要关于版本号，服务进程，有哪些sql操作语句等")])]),s._v(" "),a("h3",{attrs:{id:"_2-1-mysql各个版本的重要性介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-mysql各个版本的重要性介绍"}},[s._v("#")]),s._v(" 2.1 mysql各个版本的重要性介绍")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("**简介：各个版本的区别**\n 官网：https://dev.mysql.com/downloads/mysql/\n")])])]),a("ul",[a("li",[s._v("MySQL Community Server 社区版本，开源免费，但不提供官方技术支持。")]),s._v(" "),a("li",[s._v("MySQL Enterprise Edition 企业版本，需付费，购买了之后可以电话支持")]),s._v(" "),a("li",[s._v("MySQL Cluster 集群版，开源免费。可将几个MySQL Server封装成一个Server。")])]),s._v(" "),a("h3",{attrs:{id:"_2-2-mysql的核心知识之服务管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-mysql的核心知识之服务管理"}},[s._v("#")]),s._v(" 2.2 mysql的核心知识之服务管理")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：mysql的service服务管理与登录管理")])]),s._v(" "),a("ul",[a("li",[a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("查看mysql服务进程：\n  ps -ef | grep mysql\n  netstat -an|grep 3306\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("启动命令：systemctl start mysql\n关闭命令：systemctl stop mysql\n重新启动命令：systemctl restart mysql\n查看状态命令：systemctl status mysql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('找出root初始密码：grep "password" /var/log/mysqld.log\n登录管理： ln -s /usr/local/mysql/bin/*  /bin\n登录命令：mysql -uroot -p\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("默认端口号：3306\n配置文件：/etc/my.cnf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_2-3-mysql的可视化图形界面与命令行操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-mysql的可视化图形界面与命令行操作"}},[s._v("#")]),s._v(" 2.3 mysql的可视化图形界面与命令行操作")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("**简介：命令行的登录与图形化界面的登录**\n")])])]),a("ul",[a("li",[a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("命令行模式：\n\t登录命令：mysql -u用户 -p密码\n \t退出命令：exit;\tquit;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("图形化模式：\n \tip地址或者主机名：120.76.62.13\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_2-4-mysql的库表深入解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-mysql的库表深入解析"}},[s._v("#")]),s._v(" 2.4 mysql的库表深入解析")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：mysql数据库的基本概念详解")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("什么是库？")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("顾名思义就是数据仓库的意思，存储着一定数据结构的数据，一个数据库中可能包含着若干个表，我们可以\n通过数据库提供的多种方法来管理数据库里边的数据。本质上mysql数据库是一个关系型数据服务管理系统\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("什么是表？")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("我们所说的表就是数据表，每一张表是由行和列组成，每记录一条数据，数据表就增加一行。列是由字段名\n与字段数据属性组成，我们称之列为字段，每一个字段有着多个属性。例如是否允许为空、长度、类型等等\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("数据库：database\n数据表：table\n字段（列）：column\n行：row\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_2-5-mysql的sql各类语句精讲"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-mysql的sql各类语句精讲"}},[s._v("#")]),s._v(" 2.5 mysql的sql各类语句精讲")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：mysql的操作语句分类")])]),s._v(" "),a("ul",[a("li",[s._v("操作语句分为四类：")])]),s._v(" "),a("ol",[a("li",[s._v("DDL 数据定义语言 (Data Definition Language)  例如：建库，建表")]),s._v(" "),a("li",[s._v("DML 数据操纵语言(Data Manipulation Language) 例如：对表中的数据进行增删改操作")]),s._v(" "),a("li",[s._v("DQL 数据查询语言(Data Query Language)\t例如：对数据进行查询")]),s._v(" "),a("li",[s._v("DCL 数据控制语言(Data Control Language)\t例如：对用户的权限进行设置")])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"第3章-mysql核心知识之ddl数据定义语言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第3章-mysql核心知识之ddl数据定义语言"}},[s._v("#")]),s._v(" 第3章：mysql核心知识之DDL数据定义语言")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：对DDl数据定义语言进行深入学习")])]),s._v(" "),a("h3",{attrs:{id:"_3-1-mysql数据库必备知识之创建、查看以及使用-切换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-mysql数据库必备知识之创建、查看以及使用-切换"}},[s._v("#")]),s._v(" 3.1 mysql数据库必备知识之创建、查看以及使用/切换")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：细讲数据库的创建使用")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("直接创建数据库 db1")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" create database db1;  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查看当前在哪个库里边")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" select database();\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("进入库的操作")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" use 库名; \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("删除库")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("drop database 库名;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("判断是否存在，如果不存在则创建数据库 db2")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" create database if not exists db2;    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("创建数据库并指定字符集为 gbk")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create database db3 default character set gbk;    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查看某个库是什么字符集；")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("show create database XD; \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查看当前mysql使用的字符集")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("show variables like 'character%';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_3-2-mysql创建表之常用数据类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-mysql创建表之常用数据类型"}},[s._v("#")]),s._v(" 3.2 mysql创建表之常用数据类型")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：细讲常用数据类型")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("数据类型是什么？")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("数据类型是指列、存储过程参数、表达式和局部变量的数据特征，它决定了数据的存储格式，代表了不同的信息类型。有一些数据是要存储为数字的，数字当中有些是要存储为整数、小数、日期型等...\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("mysql常见数据类型")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("     <1>整数型\n          类型      大小      范围（有符号）               范围（无符号unsigned）    用途\n          TINYINT   1 字节    (-128，127)                (0，255)                 小整数值\n          SMALLINT  2 字节    (-32768，32767)            (0，65535)               大整数值\n          MEDIUMINT 3 字节    (-8388608，8388607)        (0，16777215)            大整数值\n          INT       4 字节    (-2147483648，2147483647)  (0，4294967295)          大整数值\n          BIGINT    8 字节     （）            \t\t     (0，2的64次方减1)        极大整数值\n     \n     <2>浮点型\n      FLOAT(m,d）  4 字节    单精度浮点型  备注：m代表总个数，d代表小数位个数\n      DOUBLE(m,d） 8 字节    双精度浮点型  备注：m代表总个数，d代表小数位个数\n      \n      <3>定点型\n      DECIMAL(m,d）    依赖于M和D的值    备注：m代表总个数，d代表小数位个数\n      \n      <4>字符串类型 \n      类型          大小              用途\n      CHAR          0-255字节         定长字符串\n      VARCHAR       0-65535字节       变长字符串\n      TINYTEXT      0-255字节         短文本字符串\n      TEXT          0-65535字节       长文本数据\n      MEDIUMTEXT    0-16777215字节    中等长度文本数据\n      LONGTEXT      0-4294967295字节  极大文本数据\n      \n      char的优缺点：存取速度比varchar更快，但是比varchar更占用空间\n      varchar的优缺点：比char省空间。但是存取速度没有char快\n      定长：比如设置 char(10)，那么'12'的字符串会被补齐， 结果为'0000000012'\n      定长：比如设置 varchar(10)，那么'12'的字符串不会被补齐，结果为'12'\n\n      <5>时间型\n      数据类型    字节数            格式                    备注\n      date        3                yyyy-MM-dd              存储日期值\n      time        3                HH:mm:ss                存储时分秒\n      year        1                yyyy                    存储年\n      datetime    8                yyyy-MM-dd HH:mm:ss     存储日期+时间\n      timestamp   4                yyyy-MM-dd HH:mm:ss     存储日期+时间，可作时间戳\n")])])])]),s._v(" "),a("li",[a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create table test_time (\n            date_value date,\n            time_value time,\n            year_value year,\n            datetime_value datetime,\n            timestamp_value timestamp\n        ) engine=innodb charset=utf8;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("insert into test_time values(now(), now(), now(), now(), now());\n")])])])])]),s._v(" "),a("h3",{attrs:{id:"_3-3-mysql数据表必备知识之创建表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-mysql数据表必备知识之创建表"}},[s._v("#")]),s._v(" 3.3 mysql数据表必备知识之创建表")]),s._v(" "),a("p",[a("strong",[s._v("简介：讲解表是怎么来创建的，以及常见约束条件举例说明")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("语法：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("CREATE TABLE 表名 (\n                  字段名1 字段类型1 约束条件1 说明1,\n                  字段名2 字段类型2 约束条件2 说明2,\n                  字段名3 字段类型3 约束条件3 说明3\n                  );\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create table 新表名 as select * from 旧表名 where 1=2;(注意：建议这种创建表的方式用于日常测试，因\t为可能索引什么的会复制不过来)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create table 新表名 like 旧表名; (同上，也是用于测试)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("约束条件：")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("comment         ----说明解释\nnot null        ----不为空\ndefault         ----默认值\nunsigned        ----无符号（即正数）\nauto_increment  ----自增\nzerofill        ----自动填充\nunique key      ----唯一值\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ul",[a("li",[s._v("创建sql")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("CREATE TABLE student (\n                    id tinyint(5) zerofill auto_increment  not null comment '学生学号',\n                    name varchar(20) default null comment '学生姓名',\n                    age  tinyint  default null comment '学生年龄',\n                    class varchar(20) default null comment '学生班级',\n                    sex char(5) not null comment '学生性别',\n                    unique key (id)\n                    )engine=innodb charset=utf8;;\n\nCREATE TABLE student (\n                    id tinyint(5)  auto_increment  default null comment '学生学号',\n                    name varchar(20) default null comment '学生姓名',\n                    age  tinyint  default null comment '学生年龄',\n                    class varchar(20) default null comment '学生班级',\n                    sex char(5) not null comment '学生性别',\n                    unique key (id)\n                    )engine=innodb charset=utf8;;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h3",{attrs:{id:"_3-4-mysql数据表必备知识之查看"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-mysql数据表必备知识之查看"}},[s._v("#")]),s._v(" 3.4 mysql数据表必备知识之查看")]),s._v(" "),a("p",[a("strong",[s._v("简介：如何查看表的基本结构信息")])]),s._v(" "),a("ul",[a("li",[s._v("查看数据库中的所有表：show tables；")]),s._v(" "),a("li",[s._v("查看表结构：desc 表名;")]),s._v(" "),a("li",[s._v("查看创建表的sql语句：show create table 表名;")]),s._v(" "),a("li",[s._v("\\G :有结束sql语句的作用，还有把显示的数据纵向旋转90度")]),s._v(" "),a("li",[s._v("\\g :有结束sql语句的作用")])]),s._v(" "),a("h3",{attrs:{id:"_3-5-mysql数据表必备知识之表结构维护与删除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-mysql数据表必备知识之表结构维护与删除"}},[s._v("#")]),s._v(" 3.5 mysql数据表必备知识之表结构维护与删除")]),s._v(" "),a("p",[a("strong",[s._v("简介：细讲核心知识表结构的修改")])]),s._v(" "),a("ul",[a("li",[s._v("修改表名")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" rename table 旧表名 to 新表名;\n rename table student to user;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("添加列")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("给表添加一列：alter table 表名 add 列名 类型;\nalter table user add addr varchar(50);\n\nalter table add 列名 类型 comment '说明';\nalter table user add famliy varchar(50) comment '学生父母';\n\n给表最前面添加一列：alter table 表名 add 列名 类型 first;\nalter table user add job varchar(10) first;\n\n给表某个字段后添加一列：alter table 表名 add 列名 类型 after 字段名;\nalter table user add servnumber int(11)  after id;\n\n注意：没有给表某个字段前添加一列的说法。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("ul",[a("li",[s._v("修改列类型")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("alter table 表名 modify 列名 新类型;\nalter table user modify servnumber varchar(20);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("修改列名")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("alter table 表名 change 旧列名 新列名 类型;\nalter table user change servnumber telephone varchar(20);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("删除列")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("alter table 表名 drop 列名;\nalter table user drop famliy;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("修改字符集")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("alter table 表名 character set 字符集;\nalter table user character  set GBK;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("mysql表的删除")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("drop table 表名；\ndrop table user;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("看表是否存在，若存在则删除表：drop table if exists 表名;\ndrop table  if exists teacher;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"第4章-mysql核心知识之dml数据操纵语言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第4章-mysql核心知识之dml数据操纵语言"}},[s._v("#")]),s._v(" 第4章：mysql核心知识之DML数据操纵语言")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：细讲核心知识对数据表的数据进行增删改")])]),s._v(" "),a("h3",{attrs:{id:"_4-1-mysql深入剖析表数据新增"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-mysql深入剖析表数据新增"}},[s._v("#")]),s._v(" 4.1 mysql深入剖析表数据新增")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：讲解表数据新增的多种例子")])]),s._v(" "),a("ul",[a("li",[s._v("普通的插入表数据")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("insert into 表名（字段名） values（字段对应值）;\n\ninsert into employee (empno,ename,job,mgr,hiredate,sal,deptnu) values ('1000','小明','经理','10001','2019-03-03','12345.23','10');\n\ninsert into 表名 values（所有字段对应值）;\ninsert into employee  values ('1001','小明','经理','10001','2019-03-03','12345.23','10');    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("ul",[a("li",[s._v("蠕虫复制（将一张表的数据复制到另一张表中）")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("insert into 表名1 select * from 表名2;\n\ninsert into 表名1（字段名1，字段名2） select 字段名1，字段名2 from 表名2;\n\ninsert into emp (empno,ename) select empno,ename from employee;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("建表复制")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create table 表名1 as select 字段名1，字段名2 from 表名2;\n\ncreate table emp as select empno ,ename from employee;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("一次性插入多个数据")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" insert into 表名  (字段名) values (对应值1),(对应值2),(对应值3);   \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("创建sql：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("某个公司的员工表\nCREATE TABLE employee(\n    empno       INT  PRIMARY KEY comment '雇员编号',\n    ename       VARCHAR(20) comment '雇员姓名',\n    job         VARCHAR(20) comment '雇员职位',\n    mgr         INT comment '雇员上级编号',\n    hiredate    DATE comment '雇佣日期',\n    sal         DECIMAL(7,2) comment '薪资',\n    deptnu      INT comment '部门编号'\n    );\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"_4-2-mysql深入剖析表数据的修改以及删除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-mysql深入剖析表数据的修改以及删除"}},[s._v("#")]),s._v(" 4.2 mysql深入剖析表数据的修改以及删除")]),s._v(" "),a("p",[a("strong",[s._v("简介：讲解如何对表数据进行修改删除以及注意事项")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("修改（更新）：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("update 表名 set 字段名1=值1 where 字段名=值;\n\nupdate 表名 set 字段名1=值1,字段名2=值2 where 字段名=值;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("删除：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("delete from 表名 where 字段名=值;\n\n truncate table 表名;\n delete from 表名;\n drop table 表名;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("注意事项：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("面试时：面试官问在删改数据之前，你会怎么做？\n答案：会对数据进行备份操作，以防万一，可以进行数据回退\n\n面试时：面试官会问，delete与truncate与drop 这三种删除数据的共同点都是删除数据，他们的不同点是什么?\ndelele 会把删除的操作记录给记录起来，以便数据回退，不会释放空间，而且不会删除定义。\ntruncate不会记录删除操作，会把表占用的空间恢复到最初，不会删除定义\ndrop会删除整张表，释放表占用的空间。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("删除速度：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("drop > truncate > delete\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_4-3-mysql核心知识之中文乱码问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-mysql核心知识之中文乱码问题"}},[s._v("#")]),s._v(" 4.3 mysql核心知识之中文乱码问题")]),s._v(" "),a("p",[a("strong",[s._v("简介：详细讲解汉字显示乱码问题")])]),s._v(" "),a("ul",[a("li",[s._v("查看当前mysql使用的字符集：show variables like 'character%';")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> show variables like 'character%';\n+--------------------------+----------------------------------+\n| Variable_name            | Value                            |\n+--------------------------+----------------------------------+\n| character_set_client     | utf8                             |\n| character_set_connection | utf8                             |\n| character_set_database   | utf8                             |\n| character_set_filesystem | binary                           |\n| character_set_results    | utf8                             |\n| character_set_server     | utf8                             |\n| character_set_system     | utf8                             |\n| character_sets_dir       | /usr/local/mysql/share/charsets/ |\n+--------------------------+----------------------------------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("character_set_client：客户端请求数据的字符集")])]),s._v(" "),a("li",[a("p",[s._v("character_set_connection：客户端与服务器连接的字符集")])]),s._v(" "),a("li",[a("p",[s._v("character_set_database：数据库服务器中某个库使用的字符集设定，如果建库时没有指明，将默认使用配置上的字符集")])]),s._v(" "),a("li",[a("p",[s._v("character_set_results：返回给客户端的字符集(从数据库读取到的数据是什么编码的)")])]),s._v(" "),a("li",[a("p",[s._v("character_set_server：为服务器安装时指定的默认字符集设定。")])]),s._v(" "),a("li",[a("p",[s._v("character_set_system：系统字符集(修改不了的，就是utf8)")])]),s._v(" "),a("li",[a("p",[s._v("character_sets_dir：mysql字符集文件的保存路径")])]),s._v(" "),a("li",[a("p",[s._v("临时：set names gbk;")])]),s._v(" "),a("li",[a("p",[s._v("永久：修改配置文件my.cnf里边的")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[client]\ndefault-character-set=gbk\n作用于外部的显示\n\n[mysqld]\ncharacter_set_server=gbk\n作用于内部，会作用于创建库表时默认字符集\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("修改库的字符集编码")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("alter database xiaoxiao default character set gbk;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("修改表的字符集编码")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("alter table employee default character set utf8;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("hr"),s._v(" "),a("h2",{attrs:{id:"第5章-mysql核心知识之dql数据查询语言与项目高级查询实战"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第5章-mysql核心知识之dql数据查询语言与项目高级查询实战"}},[s._v("#")]),s._v(" 第5章：mysql核心知识之DQL数据查询语言与项目高级查询实战")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：细讲对数据表中的数据进行各种查询，以及项目实战查询")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/*创建部门表*/\nCREATE TABLE dept(\n    deptnu      INT  PRIMARY KEY comment '部门编号',\n    dname       VARCHAR(50) comment '部门名称',\n    addr        VARCHAR(50) comment '部门地址'\n);\n\n某个公司的员工表\nCREATE TABLE employee(\n    empno       INT  PRIMARY KEY comment '雇员编号',\n    ename       VARCHAR(50) comment '雇员姓名',\n    job         VARCHAR(50) comment '雇员职位',\n    mgr         INT comment '雇员上级编号',\n    hiredate    DATE comment '雇佣日期',\n    sal         DECIMAL(7,2) comment '薪资',\n    deptnu      INT comment '部门编号'\n)ENGINE=MyISAM DEFAULT CHARSET=utf8;\n\n/*创建工资等级表*/\nCREATE TABLE salgrade(\n    grade       INT  PRIMARY KEY comment '等级',\n    lowsal      INT comment '最低薪资',\n    higsal      INT comment '最高薪资'\n);\n\n/*插入dept表数据*/\nINSERT INTO dept VALUES (10, '研发部', '北京');\nINSERT INTO dept VALUES (20, '工程部', '上海');\nINSERT INTO dept VALUES (30, '销售部', '广州');\nINSERT INTO dept VALUES (40, '财务部', '深圳');\n\n/*插入emp表数据*/\nINSERT INTO employee VALUES (1009, '唐僧', '董事长', NULL, '2010-11-17', 50000,  10);\nINSERT INTO employee VALUES (1004, '猪八戒', '经理', 1009, '2001-04-02', 29750, 20);\nINSERT INTO employee VALUES (1006, '猴子', '经理', 1009, '2011-05-01', 28500, 30);\nINSERT INTO employee VALUES (1007, '张飞', '经理', 1009, '2011-09-01', 24500,10);\nINSERT INTO employee VALUES (1008, '诸葛亮', '分析师', 1004, '2017-04-19', 30000, 20);\nINSERT INTO employee VALUES (1013, '林俊杰', '分析师', 1004, '2011-12-03', 30000, 20);\nINSERT INTO employee VALUES (1002, '牛魔王', '销售员', 1006, '2018-02-20', 16000, 30);\nINSERT INTO employee VALUES (1003, '程咬金', '销售员', 1006, '2017-02-22', 12500, 30);\nINSERT INTO employee VALUES (1005, '后裔', '销售员', 1006, '2011-09-28', 12500, 30);\nINSERT INTO employee VALUES (1010, '韩信', '销售员', 1006, '2018-09-08', 15000,30);\nINSERT INTO employee VALUES (1012, '安琪拉', '文员', 1006, '2011-12-03', 9500,  30);\nINSERT INTO employee VALUES (1014, '甄姬', '文员', 1007, '2019-01-23', 7500, 10);\nINSERT INTO employee VALUES (1011, '妲己', '文员', 1008, '2018-05-23', 11000, 20);\nINSERT INTO employee VALUES (1001, '小乔', '文员', 1013, '2018-12-17', 8000, 20);\n\n/*插入salgrade表数据*/\nINSERT INTO salgrade VALUES (1, 7000, 12000);\nINSERT INTO salgrade VALUES (2, 12010, 14000);\nINSERT INTO salgrade VALUES (3, 14010, 20000);\nINSERT INTO salgrade VALUES (4, 20010, 30000);\nINSERT INTO salgrade VALUES (5, 30010, 99990);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br")])]),a("h3",{attrs:{id:"_5-1-mysql查询子句之一where条件查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-mysql查询子句之一where条件查询"}},[s._v("#")]),s._v(" 5.1 mysql查询子句之一where条件查询")]),s._v(" "),a("p",[a("strong",[s._v("简介：详解where条件下的各种查询")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("简单查询")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select * from employee;\nselect empno,ename,job as ename_job from employee;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("精确条件查询")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select * from employee where ename='后裔';\nselect * from employee where sal != 50000;\nselect * from employee where sal <> 50000;\nselect * from employee where sal > 10000;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("模糊条件查询")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("show variables like '%aracter%'; \nselect * from employee  where ename like '林%';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("范围查询")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select * from employee where sal between 10000 and 30000;\nselect * from employee where hiredate between '2011-01-01' and '2017-12-1';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("离散查询")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select * from employee where ename in ('猴子','林俊杰','小红','小胡');  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("清除重复值")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select distinct(job) from employee;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("统计查询（聚合函数）:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("       count(code)或者count(*)\n        select count(*) from employee;\n        select count(ename) from employee;\n        \n       sum()  计算总和 \n        select sum(sal) from employee;\n        \n       max()\t计算最大值\n        select * from employee where sal= (select  max(sal) from employee);\n        \n       avg()   计算平均值\n        select avg(sal) from employee;\n        \n       min()   计算最低值\n        select * from employee where sal= (select  min(sal) from employee);\n        \n       concat函数： 起到连接作用\n        select concat(ename,' 是 ',job) as aaaa from employee;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_5-2-mysql查询子句之二group-by分组查询-分组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-mysql查询子句之二group-by分组查询-分组"}},[s._v("#")]),s._v(" 5.2 mysql查询子句之二group by分组查询（分组）")]),s._v(" "),a("p",[s._v("​    "),a("strong",[s._v("简介：详解group by的用法以及应用场景")])]),s._v(" "),a("ul",[a("li",[s._v("作用：把行 按 字段 分组")]),s._v(" "),a("li",[s._v("语法：group by 列1，列2....列N")]),s._v(" "),a("li",[s._v("适用场合：常用于统计场合，一般和聚合函数连用")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("eg:\n     select deptnu,count(*) from employee group by deptnu;\n     select deptnu,job,count(*) from employee group by deptnu,job;\n     select job,count(*) from employee group by job;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"_5-3-mysql查询子句之三having条件查询-筛选"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-mysql查询子句之三having条件查询-筛选"}},[s._v("#")]),s._v(" 5.3 mysql查询子句之三having条件查询（筛选）")]),s._v(" "),a("p",[s._v("​    "),a("strong",[s._v("简介：详解having的用法以及应用场景")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("​    作用：对查询的结果进行筛选操作")])]),s._v(" "),a("li",[a("p",[s._v("​    语法：having 条件 或者 having 聚合函数 条件")])]),s._v(" "),a("li",[a("p",[s._v("​    适用场合：一般跟在group by之后")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("eg:\n    select job,count(*) from employee group by job having job ='文员';\n    select  deptnu,job,count(*) from employee group by deptnu,job having count(*)>=2;\n    select  deptnu,job,count(*) as 总数 from employee group by deptnu,job having 总数>=2;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"_5-4-mysql查询子句之四order-by排序查询-排序"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-mysql查询子句之四order-by排序查询-排序"}},[s._v("#")]),s._v(" 5.4 mysql查询子句之四order by排序查询（排序）")]),s._v(" "),a("p",[s._v("​    "),a("strong",[s._v("简介：详解order by的用法以及应用场景")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("作用：对查询的结果进行排序操作")])]),s._v(" "),a("li",[a("p",[s._v("语法：order by 字段1,字段2 .....")])]),s._v(" "),a("li",[a("p",[s._v("适用场合：一般用在查询结果的排序")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("eg:\n     select * from employee order by sal;\n     select * from employee order by hiredate;\n     select  deptnu,job,count(*) as 总数 from employee group by deptnu,job having 总数>=2 order by deptnu desc;\n     select  deptnu,job,count(*) as 总数 from employee group by deptnu,job having 总数>=2 order by deptnu asc;\n     select  deptnu,job,count(*) as 总数 from employee group by deptnu,job having 总数>=2 order by deptnu;\n\n     顺序：where ---- group by ----- having ------ order by \n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h3",{attrs:{id:"_5-5-mysql查询子句之五limit限制查询-限制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-mysql查询子句之五limit限制查询-限制"}},[s._v("#")]),s._v(" 5.5 mysql查询子句之五limit限制查询（限制）")]),s._v(" "),a("p",[s._v("​    "),a("strong",[s._v("简介：详解limit的用法以及应用场景")])]),s._v(" "),a("ul",[a("li",[s._v("作用：对查询结果起到限制条数的作用")]),s._v(" "),a("li",[s._v("语法：limit n，m   n:代表起始条数值，不写默认为0；m代表：取出的条数")]),s._v(" "),a("li",[s._v("适用场合：数据量过多时，可以起到限制作用")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("eg:\n    select * from XD.employee limit 4,5;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_5-6-mysql查询之exists型子查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-mysql查询之exists型子查询"}},[s._v("#")]),s._v(" 5.6 mysql查询之exists型子查询")]),s._v(" "),a("p",[a("strong",[s._v("简介：详解exists的用法")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("exists型子查询后面是一个受限的select查询语句")])]),s._v(" "),a("li",[a("p",[s._v("exists子查询，如果exists后的内层查询能查出数据，则返回 TRUE 表示存在；为空则返回 FLASE则不存在。")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("分为俩种：exists跟 not exists\n\nselect 1 from employee where 1=1;\nselect * from 表名 a where exists (select 1 from 表名2 where 条件);\n\neg:查询出公司有员工的部门的详细信息\nselect * from dept a where exists (select 1 from employee b where a.deptnu=b.deptnu);\nselect * from dept a where not exists (select 1 from employee b where a.deptnu=b.deptnu);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"_5-7-mysql查询之左连接查询与右连接查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-7-mysql查询之左连接查询与右连接查询"}},[s._v("#")]),s._v(" 5.7 mysql查询之左连接查询与右连接查询")]),s._v(" "),a("p",[a("strong",[s._v("简介：详解左右连接的用法以及应用场景")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("左连接称之为左外连接\n右连接称之为右外连接\n这俩个连接都是属于外连接")])]),s._v(" "),a("li",[a("p",[s._v("左连接关键字：left join 表名 on 条件 / left outer 表名 join on 条件\n右连接关键字：right join 表名 on 条件/ right outer 表名 join on 条件")])]),s._v(" "),a("li",[a("p",[s._v("左连接说明： left join 是left outer join的简写，左(外)连接，左表(a_table)的记录将会全部表示出来，\n而右表(b_table)只会显示符合搜索条件的记录。右表记录不足的地方均为NULL。")])]),s._v(" "),a("li",[a("p",[s._v("右连接说明：right join是right outer join的简写，与左(外)连接相反，右(外)连接，左表(a_table)只会显示符合搜索条件的记录，而右表(b_table)的记录将会全部表示出来。左表记录不足的地方均为NULL。")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("eg:列出部门名称和这些部门的员工信息，同时列出那些没有的员工的部门\n        dept，employee\n        select a.dname,b.* from dept a  left join employee b on a.deptnu=b.deptnu;\n        select b.dname,a.* from employee a  right join  dept b on b.deptnu=a.deptnu;\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"_5-8-mysql查询之内连接查询与联合查询"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-8-mysql查询之内连接查询与联合查询"}},[s._v("#")]),s._v(" 5.8 mysql查询之内连接查询与联合查询")]),s._v(" "),a("p",[a("strong",[s._v("简介：详解内连接与联合查询的用法以及应用场景")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("内连接：获取两个表中字段匹配关系的记录")])]),s._v(" "),a("li",[a("p",[s._v("主要语法：INNER JOIN 表名 ON 条件;")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("eg:想查出员工张飞的所在部门的地址\n    select a.addr  from dept a inner join employee b on a.deptnu=b.deptnu and b.ename='张飞';\n    select a.addr from dept a,employee b where a.deptnu=b.deptnu and b.ename='张飞';\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("联合查询：就是把多个查询语句的查询结果结合在一起")]),s._v(" "),a("p",[s._v("主要语法1：... UNION ... （去除重复）\n主要语法2：... UNION ALL ...（不去重复）")])]),s._v(" "),a("li",[a("p",[s._v("union查询的注意事项：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("(1)两个select语句的查询结果的“字段数”必须一致；\n\n(2)通常，也应该让两个查询语句的字段类型具有一致性；\n\n(3)也可以联合更多的查询结果；\n\n(4)用到order by排序时，需要加上limit（加上最大条数就行），需要对子句用括号括起来\n\neg:对销售员的工资从低到高排序，而文员的工资从高到低排序\n    (select * from employee a where a.job = '销售员'  order by a.sal limit 999999 ) union  (select * from employee b where b.job = '文员' order by b.sal desc limit 999999);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_5-9-mysql查询之项目高级查询实战-一"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-9-mysql查询之项目高级查询实战-一"}},[s._v("#")]),s._v(" 5.9 mysql查询之项目高级查询实战(一)")]),s._v(" "),a("p",[a("strong",[s._v("简介：高级查询实战")])]),s._v(" "),a("ul",[a("li",[s._v("查出至少有一个员工的部门。显示部门编号、部门名称、部门位置、部门人数。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    涉及表： employee dept\n    语句：select deptnu,count(*) from employee group by deptnu\n    语句：select a.deptnu,a.dname,a.addr, b.zongshu from dept a,(select deptnu,count(*) as zongshu from employee group by deptnu) b where a.deptnu=b.deptnu;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("列出薪金比安琪拉高的所有员工。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    涉及表：employee\n    语句：select * from  employee where sal > (select sal from employee where ename='安琪拉');\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("列出所有员工的姓名及其直接上级的姓名。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    涉及表：employee\n    语句：select a.ename,ifnull(b.ename,'BOSS') as leader from employee a left join employee b on a.mgr=b.empno;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("列出受雇日期早于直接上级的所有员工的编号、姓名、部门名称。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    涉及表：employee dept\n    条件：a.hiredate < b.hiredate\n    语句：select a.empno,a.ename,c.dname from employee a left join employee b on a.mgr=b.empno left join dept c on a.deptnu=c.deptnu where a.hiredate < b.hiredate;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("列出部门名称和这些部门的员工信息，同时列出那些没有员工的部门。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    涉及表：dept employee\n    语句：select a.dname,b.* from dept a left join employee b on a.deptnu=b.deptnu;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("列出所有文员的姓名及其部门名称，所在部门的总人数。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    涉及表：employee dept\n    条件：job='文员'\n    语句：select deptnu,count(*) as zongshu from employee group by deptnu;\n    语句：select b.ename,a.dname,b.job,c.zongshu from dept a ,employee b ,(select deptnu,count(*) as zongshu from employee group by deptnu) c where a.deptnu=b.deptnu and b.job='文员' and b.deptnu=c.deptnu;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"_5-10-mysql查询之项目高级查询实战-二"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-10-mysql查询之项目高级查询实战-二"}},[s._v("#")]),s._v(" 5.10 mysql查询之项目高级查询实战(二)")]),s._v(" "),a("p",[a("strong",[s._v("简介：高级查询实战续")])]),s._v(" "),a("ul",[a("li",[s._v("列出最低薪金大于15000的各种工作及从事此工作的员工人数。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    涉及表：employee\n    条件：min(sal) > 15000 \n    语句：select job,count(*) from employee group by job having   min(sal) > 15000;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("列出在销售部工作的员工的姓名，假定不知道销售部的部门编号。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("   涉及表：employee dept\n   select  ename  from employee where deptnu=(select deptnu from dept where dname='销售部');\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("列出与诸葛亮从事相同工作的所有员工及部门名称。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    涉及表：employee dept\n    语句：select a.ename,b.dname from employee a,dept b where a.deptnu=b.deptnu and a.job=                (select job from employee where ename='诸葛亮');\n    语句：select a.ename,b.dname from employee a left join dept b on a.deptnu=b.deptnu where               a.job=(select job from employee where ename='诸葛亮');\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("列出薪金比  在部门30工作的员工的薪金  还高的员工姓名和薪金、部门名称。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    涉及表：employee dept\n    语句：select a.ename,a.sal,b.dname from employee a ,dept b where a.deptnu=b.deptnu and sal >          (select max(sal) from employee where deptnu=30);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("列出每个部门的员工数量、平均工资。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    涉及表：employee\n    语句：select deptnu , count(*) ,avg (sal) from employee  group by deptnu;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("列出薪金高于公司平均薪金的所有员工信息，所在部门名称，上级领导，工资等级。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    涉及表：employee dept salgrade\n    条件：select avg(sal) from employee\n    语句：elect a.*,c.dname,b.ename,d.grade from employee a,employee b,dept c ,salgrade d where           a.mgr=b.empno and a.deptnu =c.deptnu and a.sal > (select avg(sal) from employee)  and           a.sal  between d.lowsal and d.higsal;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"第6章-mysql核心知识之dcl数据控制语言-对用户权限的设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第6章-mysql核心知识之dcl数据控制语言-对用户权限的设置"}},[s._v("#")]),s._v(" 第6章：mysql核心知识之DCL数据控制语言（对用户权限的设置）")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：精讲数据控制语言如何限制用户的各种权限")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("什么是DCL数据控制语言？")]),s._v(" "),a("p",[s._v("数据控制语言（DCL：Data Control Language）是用来设置或者更改数据库用户或角色权限的语句，这些语句包括GRANT、DENY、REVOKE等语句")])])]),s._v(" "),a("h3",{attrs:{id:"_6-1-mysql限制root用户指定ip登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-mysql限制root用户指定ip登录"}},[s._v("#")]),s._v(" 6.1 mysql限制root用户指定ip登录")]),s._v(" "),a("p",[a("strong",[s._v("简介：详解如何从安全角度出发限制root用户指定ip登录")])]),s._v(" "),a("ul",[a("li",[s._v("查看root用户可以在哪台机器登录")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select user,host from mysql.user where user='root';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("修改mysql库里边的user表")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" update mysql.user set host='localhost' where user='root';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("刷新权限")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("flush privileges;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_6-2-mysql必备知识之用户密码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-mysql必备知识之用户密码"}},[s._v("#")]),s._v(" 6.2 mysql必备知识之用户密码")]),s._v(" "),a("p",[a("strong",[s._v("简介：详解忘记密码以及如何修改用户密码")])]),s._v(" "),a("ul",[a("li",[s._v("修改用户密码分三种方法：")])]),s._v(" "),a("ol",[a("li",[a("p",[s._v("​    第一种：set password for 用户@ip = password('密码');")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("  set password for root@localhost = password('root');\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("​    第二种：mysqladmin -u用户 -p旧密码 password 新密码;")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysqladmin -urootmysqladmin -uroot -proot password;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("​    第三种：update mysql.user set authentication_string=password('密码') where user='用户' and host='ip';")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("update mysql.user set authentication_string=password('root') where user='root' and host='localhost';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("ul",[a("li",[s._v("忘记密码:")])]),s._v(" "),a("ol",[a("li",[s._v("​    第一步：修改配置文件my.cnf (默认在/etc/my.cnf)，在[mysqld]下面加上 skip-grant-tables （跳过权限的意思）")]),s._v(" "),a("li",[s._v("​    第二步：重启mysql服务")]),s._v(" "),a("li",[s._v("​    第三步：mysql -uroot -p 无需密码登录进入")]),s._v(" "),a("li",[s._v("​    第四步：修改密码")])]),s._v(" "),a("h3",{attrs:{id:"_6-3-mysql实战系列之创建新用户并限制ip网段登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-mysql实战系列之创建新用户并限制ip网段登录"}},[s._v("#")]),s._v(" 6.3 mysql实战系列之创建新用户并限制ip网段登录")]),s._v(" "),a("p",[a("strong",[s._v("简介：讲解如何创建新用户与删除用户并限制ip登录")])]),s._v(" "),a("ul",[a("li",[s._v("创建用户的语法：create user 'username'@'host' identified by 'password';")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("username：你将创建的用户名\n\nhost：指定该用户在哪个主机上可以登陆，如果是本地用户可用localhost，如果想让该用户可以从任意远程主机\t登陆，可以使用通配符%\n\npassword：该用户的登陆密码，密码可以为空，如果为空则该用户可以不需要密码登陆服务器\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("创建用户语法：")])]),s._v(" "),a("p",[s._v("​    创建一个pig用户，并指定登录密码：123456，可以在任何一台远程主机都可以登录")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create user 'pig'@'%' identified by '123456';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("​    创建一个pig用户，并指定登录密码：为空，指定在120网段的机器登录")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create user 'pig'@'120.%.%.%' identified by '';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("查看权限：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("   select * from mysql.user where user='pig'\\G\n    mysql> show grants for 'pig'@'%';\n    +---------------------------------+\n    | Grants for pig@%                |\n    +---------------------------------+\n    | GRANT USAGE ON *.* TO 'pig'@'%' |\n    +---------------------------------+\n    USAGE：无权限的意思\n    mysql> show grants for 'root'@'localhost';\n    +---------------------------------------------------------------------+\n    | Grants for root@localhost                                           |\n    +---------------------------------------------------------------------+\n    | GRANT ALL PRIVILEGES ON *.* TO 'root'@'localhost' WITH GRANT OPTION |\n    +---------------------------------------------------------------------+\n    WITH GRANT OPTION:表示这个用户拥有grant权限，即可以对其他用户授权\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("ul",[a("li",[s._v("删除用户语法：drop user 'username'@'host';")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("   drop user 'pig'@'%';\n   delete from mysql.user where user='pig';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_6-4-mysql实战系列之库表权限授权与回收"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-mysql实战系列之库表权限授权与回收"}},[s._v("#")]),s._v(" 6.4 mysql实战系列之库表权限授权与回收")]),s._v(" "),a("p",[a("strong",[s._v("简介：讲解如何限制用户对库表的增删改查权限")])]),s._v(" "),a("ul",[a("li",[s._v("授权语法：grant 权限1,权限2..... on 数据库对象 to '用户'")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("grant 权限1,权限2..... on 数据库对象 to '用户'@'host' identified by 'password';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("all privileges:代表所有权限")])]),s._v(" "),a("li",[a("p",[a("em",[s._v(".")]),s._v("     :代表所有库所有表")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("对现有用户进行授权：对现有用户pig授予所有库所有表所有权限。\ngrant all privileges on *.*  to 'pig';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("对没有的用户进行授权：创建一个新用户dog授予XD库的所有权限，登录密码123456，任何一台主机登录\ngrant all privileges on XD.* to 'dog'@'%' identified by '123456';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("对没有的用户进行授权：创建一个新用户cat授予XD库的employee表 查与修改权限，登录密码123456，任何一台主机登录\ngrant select,update on XD.employee to 'cat'@'%' identified by '123456'\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("对没有的用户进行授权：对用户cat授予XD库的employee表insert 权限，登录密码123456，任何一台主机登录\ngrant insert on XD.employee to 'cat'@'%' identified by '123456';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("回收语法：revoke 权限1,权限2.....  on 数据库对象 from '用户'@'host';")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("回收pig用户的所有权限（注意：并没有回收它的登录权限）\nrevoke all privileges on *.*  from 'pig' @ '%';\nflush privileges;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("回收pig用户的所有权限（并回收它的登录权限）\ndelete from mysql.user where user='pig';\nflush privileges;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("回收cat用户对XD库的employee的查与修改权限\nrevoke select,update on XD.employee from 'cat'@'%';\nflush privileges;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"第7章-mysql的核心知识之事务实战-视图-触发器-以及存储过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第7章-mysql的核心知识之事务实战-视图-触发器-以及存储过程"}},[s._v("#")]),s._v(" 第7章：mysql的核心知识之事务实战，视图，触发器，以及存储过程")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：主要分5节课来详细讲解事务以及视图优缺点，触发器以及存储过程介绍")])]),s._v(" "),a("h3",{attrs:{id:"_7-1-mysql-必备核心知识之事务的详细解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-mysql-必备核心知识之事务的详细解析"}},[s._v("#")]),s._v(" 7.1 mysql 必备核心知识之事务的详细解析")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：深入详解事务")])]),s._v(" "),a("ul",[a("li",[s._v("什么是事务?")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("答：数据库事务通常指对数据库进行读或写的一个操作过程。有两个目的，第一个是为数据库操作提供了一个从失败中恢复到正常状态的方法，同时提供了数据库即使在异常状态下仍能保持一致性的方法；第二个是当多个应用程序在并发访问数据库时，可以在这些应用程序之间提供一个隔离方法，以防止彼此的操作互相干扰。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("事务的特性（ACID）：")])]),s._v(" "),a("li",[a("p",[s._v("[ ] 原子性(Atomicity)：事务必须是原子工作单元，一个事务中的所有语句，应该做到：要么全做，要么一个都不做；")])]),s._v(" "),a("li",[a("p",[s._v("[ ] 一致性(Consistency):让数据保持逻辑上的“合理性”，比如：小明给小红打10000块钱，既要让小明的账户减少10000，又要让小红的账户上增加10000块钱；")])]),s._v(" "),a("li",[a("p",[s._v("[ ] 隔离性(Isolation)：如果多个事务同时并发执行，但每个事务就像各自独立执行一样。")])]),s._v(" "),a("li",[a("p",[s._v("[ ] 持久性(Durability)：一个事务执行成功，则对数据来说应该是一个明确的硬盘数据更改（而不仅仅是内存中的变化）。")])]),s._v(" "),a("li",[a("p",[s._v("你要使用事务的话，表的引擎要为innodb引擎")])])]),s._v(" "),a("h3",{attrs:{id:"_7-2-mysql-必备核心知识之事务实战"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-mysql-必备核心知识之事务实战"}},[s._v("#")]),s._v(" 7.2 mysql 必备核心知识之事务实战")]),s._v(" "),a("p",[a("strong",[s._v("简介：主要讲解事务的开启以及事务实战，深入了解什么是事务")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("事务的开启与提交：")])]),s._v(" "),a("li",[a("p",[s._v("[ ] 事务的开启：begin; start transaction;")])]),s._v(" "),a("li",[a("p",[s._v("[ ] 事务的提交：commit;")])]),s._v(" "),a("li",[a("p",[s._v("[ ] 事务的回滚：rollback;")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("创建一个账户表模拟转账\ncreate table account (\n                         id tinyint(5) zerofill auto_increment  not null comment 'id编号',\n                         name varchar(20) default null comment '客户姓名',\n                         money decimal(10,2) not null comment '账户金额',\n                         primary key (id)\n                         )engine=innodb charset=utf8;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("开启autocommit（临时生效）：")]),s._v(" "),a("p",[s._v("OFF（0）：表示关闭\nON （1）：表示开启")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("  mysql> set autocommit=0;\n  Query OK, 0 rows affected (0.00 sec)\n  \n  mysql> show variables like 'autocommit';\n  +---------------+-------+\n  | Variable_name | Value |\n  +---------------+-------+\n  | autocommit    | OFF   |\n  +---------------+-------+\n  mysql> set autocommit=1;\n  Query OK, 0 rows affected (0.00 sec)\n  mysql> \n  mysql> show variables like 'autocommit';\n  +---------------+-------+\n  | Variable_name | Value |\n  +---------------+-------+\n  | autocommit    | ON    |\n")])])])]),s._v(" "),a("li",[a("p",[s._v("开启autocommit（永久生效）：")]),s._v(" "),a("p",[s._v("修改配置文件：vi /etc/my.cnf\n在[mysqld]下面加上：autocommit=1\n记得重启服务才会生效")])])]),s._v(" "),a("h3",{attrs:{id:"_7-3-mysql核心知识之视图的应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-mysql核心知识之视图的应用"}},[s._v("#")]),s._v(" 7.3 mysql核心知识之视图的应用")]),s._v(" "),a("p",[a("strong",[s._v("简介：详细讲解视图的优缺点以及应用")])]),s._v(" "),a("ul",[a("li",[s._v("什么是视图？视图的作用是什么？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("视图（view）是一种虚拟存在的表，是一个逻辑表，它本身是不包含数据的。作为一个select语句保存在数据字典中的。\n通过视图，可以展现基表（用来创建视图的表叫做基表base table）的部分数据，说白了视图的数据就是来自于基表\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("视图的优点是：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1）简单：使用视图的用户完全不需要关心后面对应的表的结构、关联条件和筛选条件，对用户来说已经是过滤好的复合条件的结果集。\n\n2）安全：使用视图的用户只能访问他们被允许查询的结果集，对表的权限管理并不能限制到某个行某个列，但是通过视图就可以简单的实现。\n\n3）数据独立：一旦视图的结构确定了，可以屏蔽表结构变化对用户的影响，源表增加列对视图没有影响;源表修改列名，则可以通过修改视图来解决，不会造成对访问者的影响。\n　　\n4）不占用空间：视图是逻辑上的表，不占用内存空间\n\n总而言之，使用视图的大部分情况是为了保障数据安全性，提高查询效率。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ul",[a("li",[s._v("视图的创建以及修改")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("创建的基本语法是：\n    create view <视图名称> as select 语句;\n    create view <视图名称> (字段) as select 语句;\n    create or replace view <视图名称>;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("修改的语法是：\nalter view <视图名称> as select 语句;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("视图删除语法：\ndrop view <视图名称> ;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("视图的缺点")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" 1)性能差：sql server必须把视图查询转化成对基本表的查询，如果这个视图是由一个复杂的多表查询所定义，那么，即使是视图的一个简单查询，sql server也要把它变成一个复杂的结合体，需要花费一定的时间。\n \n 2)修改限制：当用户试图修改试图的某些信息时，数据库必须把它转化为对基本表的某些信息的修改，对于简单的试图来说，这是很方便的，但是，对于比较复杂的试图，可能是不可修改的。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"_7-4-mysql-的触发器介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-mysql-的触发器介绍"}},[s._v("#")]),s._v(" 7.4 mysql 的触发器介绍")]),s._v(" "),a("p",[a("strong",[s._v("简介:介绍什么是触发器以及如何来创建")])]),s._v(" "),a("ul",[a("li",[s._v("什么是触发器？")])]),s._v(" "),a("p",[s._v("​    触发器就是监视某种情况，并触发某种操作")]),s._v(" "),a("ul",[a("li",[s._v("创建触发器的语法:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create trigger 触发器名称  after/before   insert/update/delete on 表名  \n        for each row\n        begin\n        sql语句;\n        end\n         \t\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("after/before:可以设置为事件发生前或后\ninsert/update/delete:它们可以在执行insert、update或delete的过程中触发\nfor each row:每隔一行执行一次动作\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("删除触发器的语法：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("drop trigger 触发器名称;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("演示：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("创建一个员工迟到表：\n create table work_time_delay(\n            empno int not null comment '雇员编号',\n            ename varchar(50) comment '雇员姓名',\n            status int comment '状态'\n            );\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("delimiter // 自定义语句的结束符号\n\n    mysql> delimiter //\n    mysql> \n    mysql> create trigger trig_work after insert on work_time_delay\n        -> for each row\n        -> begin\n        -> update employee set sal=sal-100 where empno=new.empno;\n        -> end\n        -> //\n    Query OK, 0 rows affected (0.01 sec)\n\nnew：指的是事件发生before或者after保存的新数据\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h3",{attrs:{id:"_7-5-mysql的存储过程介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-5-mysql的存储过程介绍"}},[s._v("#")]),s._v(" 7.5 mysql的存储过程介绍")]),s._v(" "),a("p",[a("strong",[s._v("简介：介绍什么是存储过程")])]),s._v(" "),a("ul",[a("li",[s._v("什么是存储过程？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("存储过程就是把复杂的一系列操作，封装成一个过程。类似于shell，python脚本等。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("存储过程的优缺点")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    优点是：\n        1)复杂操作，调用简单\n        2)速度快\n        \n    缺点是：\n        1）封装复杂\n        2) 没有灵活性\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("ul",[a("li",[s._v("创建存储过程语法：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create procedure 名称 (参数....)\n  \t\tbegin\n         过程体;\n         过程体;\n         end\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("参数：in|out|inout 参数名称 类型（长度）\n        in：表示调用者向过程传入值（传入值可以是字面量或变量）\n        out：表示过程向调用者传出值(可以返回多个值)（传出值只能是变量）\n        inout：既表示调用者向过程传入值，又表示过程向调用者传出值（值只能是变量）\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("声明变量：declare 变量名 类型(长度) default 默认值;")])]),s._v(" "),a("li",[a("p",[s._v("给变量赋值：set @变量名=值;")])]),s._v(" "),a("li",[a("p",[s._v("调用存储命令：call 名称(@变量名);")])]),s._v(" "),a("li",[a("p",[s._v("删除存储过程命令：drop procedure 名称;")])]),s._v(" "),a("li",[a("p",[s._v("查看创建的存储过程命令：")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("show create procedure 名称\\G;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("创建一个简单的存储过程：\n    mysql> delimiter //\n    mysql> create procedure  name(in n int)\n        ->             begin\n        ->             select * from employee limit n;\n        ->             end\n        -> //\n    Query OK, 0 rows affected (0.00 sec)\n\n    mysql> set @n=5;\n        -> //\n    Query OK, 0 rows affected (0.00 sec)\n\n    mysql> \n    mysql> call name(@n);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("  mysql>         create procedure  name()\n        ->             begin\n        ->             declare  n int default 6;\n        ->             select * from employee limit n;\n        ->             end\n        -> //\n    Query OK, 0 rows affected (0.00 sec)\n\n    mysql> call name();\n\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("hr"),s._v(" "),a("h2",{attrs:{id:"第8章-mysql必备核心知识之索引与存储引擎的介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第8章-mysql必备核心知识之索引与存储引擎的介绍"}},[s._v("#")]),s._v(" 第8章：mysql必备核心知识之索引与存储引擎的介绍")]),s._v(" "),a("p",[s._v("​    "),a("strong",[s._v("简介：各种索引的概述，以及如何创建索引与引擎的介绍")])]),s._v(" "),a("h3",{attrs:{id:"_8-1-mysql的存储引擎介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-1-mysql的存储引擎介绍"}},[s._v("#")]),s._v(" 8.1 mysql的存储引擎介绍")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("**简介：主要来详细介绍MyISAM与InnoDB引擎**\n")])])]),a("p",[s._v("（1）什么是数据库存储引擎？")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("数据库引擎是数据库底层软件组件，不同的存储引擎提供不同的存储机制，索引技巧，锁定水平等功能，使用不同的数据库引擎，可以获得特定的功能\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（2）如何查看引擎？")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("如何查看数据库支持的引擎\nshow engines;\n\n查看当前数据的引擎：\nshow create table 表名\\G\n\n查看当前库所有表的引擎：\nshow table status\\G\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("（3）建表时指定引擎")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create table yingqin (id int,name varchar(20)) engine='InnoDB';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("（4）修改表的引擎")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("alter table 表名 engine='MyiSAm';\n\n修改默认引擎\n​    vi /etc/my.cnf\n​    [mysqld]下面\n​    default-storage-engine=MyIsAM\n​    记得保存后重启服务\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("（5）MyISAM与InnoDB的区别")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("MyISAM：支持全文索引（full text）;不支持事务;表级锁;保存表的具体行数;奔溃恢复不好\n\nInnodb：支持事务;以前的版本是不支持全文索引，但在5.6之后的版本就开始支持这个功能了;行级锁（并非绝对，当执行sql语句时不能确定范围时，也会进行锁全表例如： update table set id=3 where name like 'a%';）;不保存表的具体行数;奔溃恢复好\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("（6）总结：什么时候选择什么引擎比较好")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("MyISAM：\n​    一般来说MyISAM不需要用到事务的时候\n​    做很多count计算\n\nInnoDB：\n​    可靠性要求高的，或者要求支持事务\n​ \t 想要用到外键约束的时候（讲外键的时候会讲）\n\n推荐：\n​    推荐用InnoDB\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h3",{attrs:{id:"_8-2-mysql必备知识之常用索引精讲"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-2-mysql必备知识之常用索引精讲"}},[s._v("#")]),s._v(" 8.2 mysql必备知识之常用索引精讲")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：讲解什么是索引，索引的优缺点，以及常见索引有哪些")])]),s._v(" "),a("ul",[a("li",[s._v("什么是索引？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("索引是一个单独的，存储在磁盘中上的数据库结构，它们包含着对数据表里的所有记录的引用指针。使用索引可以快速的找出在某列或多列中有特定值的行。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("索引的优点：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" \t通过创建唯一索引，来保证数据库表中的每一行数据的唯一性。\n​\t可以加快数据的检索速度。\n​\t可以保证表数据的完整性与准确性\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("索引的缺点：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" \t索引需要占用物理空间。\n​\t对表中的数据进行改动时，索引也需要跟着动态维护，降低了数据的维护速度。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("索引的常见类型：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" \tindex：普通索引\n\n​   unique：唯一索引\n\n​   primary key：主键索引\n\n​   foreign key：外键索引\n\n​   fulltext: 全文索引\n\n​   组合索引\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("ul",[a("li",[s._v("创建表的sql语句：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create table test (\n\tid int(7) zerofill auto_increment not null,\n\tusername varchar(20),\n\tservnumber varchar(30),\n\tpassword varchar(20),\n\tcreatetime datetime,\n\tprimary key (id)\n)DEFAULT CHARSET=utf8;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("ul",[a("li",[s._v("生成百万甚至千万级别表的sql 语句 shell脚本：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("#!/bin/bash\n\necho \"请输入字段servnumber的值：\"\nread serber\necho \"请输入创建sql语句的数量：\"\nread number\n\n# char=`head /dev/urandom | tr -dc 0-9 | head -c 11`\n\nfor (( i=0;i<$number;i++ ))\n        do\n        pass=`head /dev/urandom | tr -dc a-z | head -c 8`\n        let serber=serber+1\n        echo \"insert into test(id,username,servnumber,password,createtime) values('$i','user${i}','${serber}','$pass',now());\" >>sql.txt\n\n    done\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("vi test.sh")]),s._v(" "),a("p",[s._v("执行shell脚本：sh test.sh")]),s._v(" "),a("p",[s._v("进行插数操作：source /home/dazhu/sql.txt")]),s._v(" "),a("h3",{attrs:{id:"_8-3-mysql必备核心知识之普通索引与唯一索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-3-mysql必备核心知识之普通索引与唯一索引"}},[s._v("#")]),s._v(" 8.3 mysql必备核心知识之普通索引与唯一索引")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：介绍普通索引与唯一索引")])]),s._v(" "),a("ul",[a("li",[s._v("什么是普通索引？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("普通索引（index）顾名思义就是各类索引中最为普通的索引，主要任务就是提高查询速度。其特点是允许出现相同的索引内容，允许空（null）值\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("什么是唯一索引？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("唯一索引：（unique）顾名思义就是不可以出现相同的索引内容，但是可以为空（null）值\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("如何创建普通索引或者唯一索引？")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("创建表的时候创建")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create table test (\n                        id int(7) zerofill auto_increment not null,\n                        username varchar(20),\n                        servnumber varchar(30),\n                        password varchar(20),\n                        createtime datetime,\n                        unique (id)\n                  )DEFAULT CHARSET=utf8;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("直接为表添加索引")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("语法：\n     alter table 表名 add index 索引名称 (字段名称);\n eg: \n \t alter table test add unique unique_username (username);\n\n注意：假如没有指定索引名称时，会以默认的字段名为索引名称\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("直接创建索引")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("语法：create index 索引 on 表名 (字段名);\neg：create index index_createtime on test (createtime);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("查看索引")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("语法：show index from 表名\\G\neg: show index from test\\G\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("如何删除索引")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("语法：drop index 索引名称 on 表名;\neg：drop index unique_username on test;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("语法：alter table 表名 drop index 索引名;\neg：alter table test drop index createtime;\n")])])]),a("h3",{attrs:{id:"_8-4-mysql必备核心知识之主键索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-4-mysql必备核心知识之主键索引"}},[s._v("#")]),s._v(" 8.4 mysql必备核心知识之主键索引")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：详细讲解主键索引")])]),s._v(" "),a("ul",[a("li",[s._v("什么是主键索引？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("把主键添加索引就是主键索引，它是一种特殊的唯一索引，不允许有空值，而唯一索引（unique是允许为空值的）。指定为“PRIMARY KEY”\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("主键：主键是表的某一列，这一列的值是用来标志表中的每一行数据的。\n注意：每一张表只能拥有一个主键\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("创建主键：")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("1）创建表的时候创建\n\n2）直接为表添加主键索引\n   语法：alter table 表名 add primary key (字段名);\n   eg：alter table test add primary key (id);\n")])])])]),s._v(" "),a("li",[a("p",[s._v("删除主键：")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("语法：\nalter table 表名 drop primary key;\neg： \nalter table test drop primary key;\n\n注意：在有自增的情况下，必须先删除自增，才可以删除主键\n\n删除自增：alter table test change id id int(7) unsigned zerofill not null;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h3",{attrs:{id:"_8-5-mysql核心知识之全文索引的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-5-mysql核心知识之全文索引的使用"}},[s._v("#")]),s._v(" 8.5 mysql核心知识之全文索引的使用")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：介绍什么是全文索引以及使用")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("什么是全文索引？")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("全文索引是将存储在数据库中的文章或者句子等任意内容信息查找出来的索引，单位是词。全文索引也是目前搜索引擎使用的一种关键技术。指定为 fulltex\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("创建练习表的sql：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("create table command (\nid int(5) unsigned primary key  auto_increment,\nname varchar(10),\ninstruction varchar(60)\n)engine=MyISAM;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("插入数据sql：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("insert into command values('1','ls','list directory contents');\ninsert into command values('2','wc','print newline, word, and byte counts for each file');\ninsert into command values('3','cut','remove sections from each line of files');\ninsert into command values('4','sort','sort lines of text files');\ninsert into command values('5','find','search for files in a directory hierarchy');\ninsert into command values('6','cp','复制文件或者文件夹');\ninsert into command values('7','top','display Linux processes');\ninsert into command values('8','mv','修改文件名，移动');\ninsert into command values('9','停止词','is,not,me,yes,no ...');\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("添加全文索引：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("创建表的时候创建全文索引")])]),s._v(" "),a("li",[a("p",[s._v("通过alter添加")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("alter table command  add fulltext(instruction);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("使用全文索引：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select * from 表名 where match  (字段名) against ('检索内容');\nselect * from command where match(instruction) against ('sections');\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查看匹配度：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select * from command where match(instruction) against ('directory');\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("停止词：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("出现频率很高的词，将会使全文索引失效\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("in boolean mode 模式：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("in boolean mode：意思是指定全文检索模式为布尔全文检索（简单可以理解为是检索方式）\nselect * from 表名 where match (字段名) against ('检索内容' in boolean mode);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("注意点：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("使用通配符*时，只能放在词的后边，不能放前边。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("删除全文索引：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("alter table command drop index instruction;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("注意点总结：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" \t1、一般情况下创建全文索引的字段数据类型为 char、varchar、text 。其它字段类型不可以\n\n​   2、全文索引不针对非常频繁的词做索引。比如is，no，not，you，me，yes这些，我们称之为停止词\n\n​   3、对英文检索时忽略大小写\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_8-6-mysql核心知识之外键约束剖析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-6-mysql核心知识之外键约束剖析"}},[s._v("#")]),s._v(" 8.6 mysql核心知识之外键约束剖析")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：解析什么是外键约束，以及有什么作用")])]),s._v(" "),a("ul",[a("li",[s._v("什么是外键？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("外键就是作用于两个表数据之间的链接的一列或多列，用来保证表与表之间的数据的完整性和准确性。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("添加外键约束：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("语法：foreign key (字段名) references 关联的表名(关联表的字段名)\n\n注意：主键跟外键的字段类型一定要相\n\ncreate table的方法：\n\nCREATE TABLE `employee` (\n  `empno` int(11) NOT NULL COMMENT '雇员编号',\n  `ename` varchar(50) DEFAULT NULL COMMENT '雇员姓名',\n  `job` varchar(30) DEFAULT NULL,\n  `mgr` int(11) DEFAULT NULL COMMENT '雇员上级编号',\n  `hiredate` date DEFAULT NULL COMMENT '雇佣日期',\n  `sal` decimal(7,2) DEFAULT NULL COMMENT '薪资',\n  `deptnu` int(11) DEFAULT NULL COMMENT '部门编号',\n  PRIMARY KEY (`empno`),\n foreign key (deptnu) references dept(deptnu)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n\n alter table的方法：\n alter table employee add foreign key (deptnu) references dept(deptnu);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("ul",[a("li",[s._v("删除外键约束：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("注意：在干掉外键索引之前必须先把外键约束删除，才能删除索引\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> alter table employee drop index deptnu;\nERROR 1553 (HY000): Cannot drop index 'deptnu': needed in a foreign key constraint\nmysql> \nmysql> alter table employee drop foreign key employee_ibfk_1;\nQuery OK, 0 rows affected (0.01 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql> \nmysql> alter table employee drop index deptnu;\nQuery OK, 0 rows affected (0.01 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("ul",[a("li",[s._v("注意点总结：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("（1）俩个表，主键跟外键的字段类型一定要相同\n\n（2）要使用外键约束表的引擎一定得是InnoDB引擎，MyISAM是不起作用的\n\n（3）在干掉外键索引之前必须先把外键约束删除，才能删除索引\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[a("a",{attrs:{href:"http://www.cppblog.com/wolf/articles/69089.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("外键推荐阅读-1"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.jianshu.com/p/010106e61cc6",target:"_blank",rel:"noopener noreferrer"}},[s._v("外键推荐阅读-2"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"_8-7-mysql核心知识之联合索引"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-7-mysql核心知识之联合索引"}},[s._v("#")]),s._v(" 8.7 mysql核心知识之联合索引")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：详细介绍联合索引")])]),s._v(" "),a("ul",[a("li",[s._v("什么是联合索引？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("联合索引又称组合索引或者复合索引，是建立在俩列或者多列以上的索引。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("怎么来创建联合索引？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("alter table 表名 add index(字段1,字段2,字段3);\n\nalter table test add index(username,servnumber,password);\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[s._v("怎么删除联合索引？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("alter table test drop index username;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("为什么要使用联合索引，而不使用多个单列索引？")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("联合索引的效率远远高于单列索引\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("联合索引的最左原则")])]),s._v(" "),a("li",[a("p",[s._v("注意点总结：")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" 索引并非越多越好，过多的索引会增加数据的维护速度还有磁盘空间的浪费。\n\n​ 当表的数据量很大的时候，可以考虑建立索引。\n\n​ 表中经常查数据的字段，可以考虑建立索引。\n\n​ 想要保证表中数据的唯一性，可以考虑建立唯一索引。\n\n​ 想要保证俩张表中的数据的完整性跟准确性，可以考虑建立外键约束。\n\n​ 经常对多列数据进行查询时，可以考虑建立联合索引。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h2",{attrs:{id:"第9章-mysql不得不学的sql语句优化思路"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第9章-mysql不得不学的sql语句优化思路"}},[s._v("#")]),s._v(" 第9章：mysql不得不学的sql语句优化思路")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：介绍如何对sql查询语句进行优化")])]),s._v(" "),a("h3",{attrs:{id:"_9-1-mysql的慢查询日志开启与问题定位"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-1-mysql的慢查询日志开启与问题定位"}},[s._v("#")]),s._v(" 9.1 mysql的慢查询日志开启与问题定位")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：介绍如何开启慢查询日志与问题定位")])]),s._v(" "),a("ul",[a("li",[s._v("第一步：查看是否已经开启了慢查询日志")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> show variables like 'slow%';\n+---------------------+--------------------------------------+\n| Variable_name       | Value                                |\n+---------------------+--------------------------------------+\n| slow_launch_time    | 2                                    |\n| slow_query_log      | OFF                                  |\n| slow_query_log_file | /data/mydata/xdclass-public-slow.log |\n+---------------------+--------------------------------------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("ul",[a("li",[s._v("第二步：开启慢查询日志")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("set global slow_query_log = on ;\n\n日志路径也可以自定义：\n\nset global slow_query_log_file = '路径';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("ul",[a("li",[s._v("第三步：查看慢查询的时间临界值")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("show variables like '%long%';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("第四步：设置慢查询的时间标准")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("set long_query_time=0.4;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("注意：重启mysql服务会让在交互界面设置的慢查询恢复到默认")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("永久生效的设置方法：修改配置文件 vi /etc/my.cnf\n[mysqld]\nslow_query_log = 1\nlong_query_time = 0.1\nslow_query_log_file =/usr/local/mysql/mysql_slow.log\n\n最后必须重启服务才能生效！\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"_9-2-mysql的sql语句执行过程解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-2-mysql的sql语句执行过程解析"}},[s._v("#")]),s._v(" 9.2 mysql的sql语句执行过程解析")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：介绍如何开启性能详情")])]),s._v(" "),a("ul",[a("li",[s._v("第一步：查看性能详情是否开启")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> show variables like '%profiling%';\n+------------------------+-------+\n| Variable_name          | Value |\n+------------------------+-------+\n| have_profiling         | YES   |\n| profiling              | OFF   |\n| profiling_history_size | 15    |\n+------------------------+-------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("ul",[a("li",[s._v("第二步：开启性能记录功能")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("set profiling = on ;\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("第三步：查看性能的记录")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> show profiles;\n+----------+------------+---------------------------------------------------+\n| Query_ID | Duration   | Query                                             |\n+----------+------------+---------------------------------------------------+\n|        1 | 0.00177775 | show variables like '%profiling%'                 |\n|        2 | 0.00037900 | select * from test where id='087878'              |\n|        3 | 0.34618025 | select * from test where servnumber='1367008787'  |\n|        4 | 0.31986825 | select * from test where servnumber='13670087879' |\n+----------+------------+---------------------------------------------------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("ul",[a("li",[s._v("第四步：查看语句的执行性能详情")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> show profile for query 4;\n+----------------------+----------+\n| Status               | Duration |\n+----------------------+----------+\n| starting             | 0.000100 |\n| checking permissions | 0.000010 |\n| Opening tables       | 0.000023 |\n| init                 | 0.000045 |\n| System lock          | 0.000015 |\n| optimizing           | 0.000016 |\n| statistics           | 0.000028 |\n| preparing            | 0.000020 |\n| executing            | 0.000006 |\n| Sending data         | 0.319489 |\n| end                  | 0.000037 |\n| query end            | 0.000012 |\n| closing tables       | 0.000012 |\n| freeing items        | 0.000040 |\n| cleaning up          | 0.000017 |\n+----------------------+----------+\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("ul",[a("li",[s._v("性能线程的详细解释官方文档链接：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("https://dev.mysql.com/doc/refman/5.7/en/general-thread-states.html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_9-3-mysql语句优化的几个小建议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_9-3-mysql语句优化的几个小建议"}},[s._v("#")]),s._v(" 9.3 mysql语句优化的几个小建议")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：介绍日常工作应该尽量避免的sql语句")])]),s._v(" "),a("ul",[a("li",[s._v("第一个注意点：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("尽量避免使用select *from ，尽量精确到想要的结果字段\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("第二个注意点：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("尽量避免条件使用or\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("第三个注意点：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("记得加上limit 限制行数，避免数据量过大消耗性能\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("第四个注意点：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("使用模糊查询时，%放在前面是会使索引失效\n\nmysql> explain select * from test where servnumber like '%1367000%'\\G\n*************************** 1. row ***************************\n           id: 1\n  select_type: SIMPLE\n        table: test\n   partitions: NULL\n         type: ALL\npossible_keys: NULL\n          key: NULL\n      key_len: NULL\n          ref: NULL\n         rows: 996303\n     filtered: 11.11\n        Extra: Using where\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("ul",[a("li",[s._v("第五个注意点：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("要小心条件字段类型的转换\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"第10章-mysql数据安全核心知识之备份技能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第10章-mysql数据安全核心知识之备份技能"}},[s._v("#")]),s._v(" 第10章：mysql数据安全核心知识之备份技能")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：介绍备份数据的重要性以及一些常见的数据备份技能")])]),s._v(" "),a("h3",{attrs:{id:"_10-1-mysql数据安全之备份的背景意义"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-mysql数据安全之备份的背景意义"}},[s._v("#")]),s._v(" 10.1 mysql数据安全之备份的背景意义")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：数据库备份的意义")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("数据备份的意义：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("（1）保护数据的安全；\n\n（2）在出现意外的时候（硬盘的损坏，断电，黑客的攻击），以便数据的恢复；\n\n（3）导出生产的数据以便研发人员或者测试人员测试学习；\n\n（4）高权限的人员操作失误导致数据丢失，以便恢复；\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_10-2-mysql数据安全之备份的介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-2-mysql数据安全之备份的介绍"}},[s._v("#")]),s._v(" 10.2 mysql数据安全之备份的介绍")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：介绍数据备份")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("数据库的备份类型：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("（1）完全备份：对整个数据库的数据进行备份\n\n（2）部分备份：对部分数据进行备份（可以是一张表也可以是多张表）\n\n\t  增量备份：是以上一次备份为基础来备份变更数据的，节约空间\n\n\t  差异备份：是以第一次完全备份的基础来备份变更备份的，浪费空间\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("img",{attrs:{src:"C:%5CUsers%5Cdabiao%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5C1555089061504.png",alt:"1555089061504"}})])]),s._v(" "),a("li",[a("p",[s._v("数据库备份的方式：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("（1）逻辑备份：直接生成sql语句保存起来，在恢复数据的时候执行备份的sql语句来实现数据的恢复\n\n（2）物理备份：直接拷贝相关的物理数据\n\n区别：逻辑备份效率低，恢复数据效率低，但是逻辑备份节约空间；物理备份浪费空间，但是相对逻辑备份而言效率比较高\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("数据库备份的场景：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("（1）热备份：备份时，数据库的读写操作不会受到影响\n\n（2）温备份：备份时，数据库的读操作可以进行，但是写操作不能执行\n\n（3）冷备份：备份时，不能进行任何操作\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_10-3-mysql数据安全之mysqldump备份实例-跨机器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-3-mysql数据安全之mysqldump备份实例-跨机器"}},[s._v("#")]),s._v(" 10.3 mysql数据安全之mysqldump备份实例（跨机器）")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：如何利用mysql自带命令mysqldump来备份单库或者多库")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("mysqldump使用语法：")]),s._v(" "),a("p",[s._v("mysqldump -u 用户 -h host -p 密码 dbname table > 路径")])]),s._v(" "),a("li",[a("p",[s._v("远程备份单库例子：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysqldump -uroot -pabc123456 -h120.25.93.69 zabbix | gzip  > /mysql_data_back/zabbix_users.sql.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("远程备份单库例子并保留创建库语句：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysqldump -uroot -pabc123456 -h120.25.93.69 --databases zabbix | gzip  > /mysql_data_back/zabbix_bak.sql.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("远程备份单库单表的例子：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysqldump -uroot -pabc123456 -h120.25.93.69 zabbix  users | gzip  > /mysql_data_back/zabbix_users.sql.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("远程备份多库的例子：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysqldump -uroot -pabc123456 -h120.25.93.69 --databases zabbix XD | gzip  > /mysql_data_back/zabbix_XD.sql.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("远程备份全库的例子：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysqldump -uroot -pabc123456 -h120.25.93.69 --all-databases  | gzip  > /mysql_data_back/all.sql.gz\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_10-4-mysql数据安全之mysql数据的恢复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-4-mysql数据安全之mysql数据的恢复"}},[s._v("#")]),s._v(" 10.4 mysql数据安全之mysql数据的恢复")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：如何恢复数据")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("远程恢复数据（备份的数据文件里有创建库的语句）：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql -uroot -pabc123456 -h120.25.93.69  < zabbix_bak.sql\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("远程恢复数据（备份的数据文件里没有创建库的语句）：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql -uroot -pabc123456 -h120.25.93.69  zabbix < zabbix_bak.sql\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_10-5-mysql数据安全之物理备份"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-5-mysql数据安全之物理备份"}},[s._v("#")]),s._v(" 10.5 mysql数据安全之物理备份")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：详解数据库源文件以及如何物理备份")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("看找数据库源文件路径（一）：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> show variables like 'datadir%';\n+---------------+---------------+\n| Variable_name | Value         |\n+---------------+---------------+\n| datadir       | /data/mydata/ |\n+---------------+---------------+\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("看找数据库源文件路径（二）：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" cat /etc/my.cnf\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("MyISAM表源文件：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("db.opt：创建库的时候生成，主要存储着当前库的默认字符集和字符校验规则\n\n.frm ：记录着表结构信息的文件\n\n.MYI：记录着索引的文件\n\n.MYD :记录着表的数据\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("InnoDB表源文件：InnoDB有着共享表空间跟独立表空间的概念。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("db.opt：创建库的时候生成，主要存储着当前库的默认字符集和字符校验规则\n\n.frm ：记录着表结构信息的文件\n\n.ibd ：独立表空间，里边记录这个表的数据和索引\n\nibdata1：共享表空间，里边记录表的数据和索引\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("请求全局读锁：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("flush tables with read lock;\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("解锁：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("unlock tables;\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_10-6-mysql数据安全之利用二进制日志mysqlbinlog备份数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-6-mysql数据安全之利用二进制日志mysqlbinlog备份数据"}},[s._v("#")]),s._v(" 10.6 mysql数据安全之利用二进制日志mysqlbinlog备份数据")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：讲解如何利用二进制日志来备份数据")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("什么是二进制日志：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("二进制日志就是记录着mysql数据库中的一些写入性操作，比如一些增删改，但是，不包括查询！\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("二进制日志有哪些功能：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("一般情况下，二进制日志有着数据复制和数据恢复的功能\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("注意：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("开启二进制日志会有1%的性能消耗！\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查看二进制日志是否开启：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> show variables like 'log_bin%';\n+---------------------------------+-------+\n| Variable_name                   | Value |\n+---------------------------------+-------+\n| log_bin                         | OFF   |\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("开启二进制日志 : vi /etc/my.cnf")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[mysqld]\nlog-bin=/data/mydata/log_bin/mysql-bin\nserver-id=1\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查看所有的binlog日志列表：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> show master logs;\n+------------------+-----------+\n| Log_name         | File_size |\n+------------------+-----------+\n| mysql-bin.000001 |     23638 |\n+------------------+-----------+\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("刷新二进制日志：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("flush logs;\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("重置(清空）二进制日志文件：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysql> show master logs;\n+------------------+-----------+\n| Log_name         | File_size |\n+------------------+-----------+\n| mysql-bin.000001 |      1091 |\n+------------------+-----------+\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("使用mysqldump备份数据时，加上-F选项可以重新生成一个新的二进制日志文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("mysqldump -uroot -p XD user -F  > user_bak.sql\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"_10-7-mysql数据安全之利用二进制日志mysqlbinlog恢复数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_10-7-mysql数据安全之利用二进制日志mysqlbinlog恢复数据"}},[s._v("#")]),s._v(" 10.7 mysql数据安全之利用二进制日志mysqlbinlog恢复数据")]),s._v(" "),a("p",[s._v("​\t"),a("strong",[s._v("简介：讲解如何利用二进制日志来恢复数据")])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("查看二进制日志文件的内容报错：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@xdclass-public log_bin]# mysqlbinlog mysql-bin.000002\nmysqlbinlog: [ERROR] unknown variable 'default-character-set=utf8'\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ul",[a("li",[a("p",[s._v("解决：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("第一种：在mysqlbinlog 后边加上 --no-defaults \n\n第二种：注释掉配置文件里边的default-character-set=utf8\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("把二进制日志文件导出成普通文件：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(" mysqlbinlog --base64-output=DECODE-ROWS -v mysql-bin.000002 > mysqlbin.sql\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("找出要恢复的位置：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("（1）找出关键字的行数：mysqlbinlog --no-defaults mysql-bin.000002 | cat -n  | grep -iw 'drop'\n\n[root@xdclass-public log_bin]# mysqlbinlog --no-defaults mysql-bin.000002 | cat -n  | grep -iw 'drop'\n  4180  DROP TABLE `user` /* generated by server */\n\n\n（2）打印出相关内容：mysqlbinlog --no-defaults mysql-bin.000002 | cat -n | sed -n '4170,4180p'\n\n[root@xdclass-public log_bin]# mysqlbinlog --no-defaults mysql-bin.000002 | cat -n | sed -n '4170,4180p'\n  4170  # at 59578\n  4171  #190419  0:41:48 server id 1  end_log_pos 59609 CRC32 0x36cda2b7        Xid = 6380\n  4172  COMMIT/*!*/;\n  4173  # at 59609\n  4174  #190419  0:41:48 server id 1  end_log_pos 59674 CRC32 0x8de2f06a        Anonymous_GTID  last_committed=145      sequence_number=146\n  4175  SET @@SESSION.GTID_NEXT= 'ANONYMOUS'/*!*/;\n  4176  # at 59674\n  4177  #190419  0:41:48 server id 1  end_log_pos 59787 CRC32 0x6b2edd2b        Query   thread_id=14    exec_time=0     error_code=0\n  4178  use `XD`/*!*/;\n  4179  SET TIMESTAMP=1555605708/*!*/;\n  4180  DROP TABLE `user` /* generated by server */\n[root@xdclass-public log_bin]# \n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("恢复数据：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("第一步：把备份的数据表user恢复到数据库中：mysql -uroot -p XD < /mysql_data_back/user_bak.sql")])]),s._v(" "),a("li",[a("p",[s._v("第二步：利用上面找到的删除的位置进行恢复数据")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('mysqlbinlog --no-defaults --set-charset=utf8  --stop-position="59674" /data/mydata/log_bin/mysql-bin.000002 | mysql -uroot -p \n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("登录数据库查看数据是否恢复回来")])])])])}),[],!1,null,null,null);e.default=t.exports}}]);